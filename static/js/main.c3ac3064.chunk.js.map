{"version":3,"sources":["SpeechDaemon.js","AppStyles.js","components/MicrophoneSwitchStyles.js","components/app-icons.js","components/MicrophoneSwitch.js","components/NativeSpeaker.js","components/ButtonToConvertToTextFileThenDownload.js","components/InterimTranscript.js","components/StackHistory.js","components/FrequentlyAskedQuestions.js","components/ToggleButton.js","components/TabPanels.js","components/TabPanel.js","components/ResponsiveDrawer.js","components/line/SpeechBubble.js","components/line/SelfSpeechBubble.js","helpers/validation.js","components/line/Chat.js","helpers/speakeroid.js","App.js","serviceWorker.js","index.js","stamp/8.png","stamp/27.png","icon.png","stamp/13.png","stamp/22.png"],"names":["SpeechDaemon","options","recognition","window","webkitSpeechRecognition","SpeechRecognition","interimResults","continuous","onresult","event","emit","onsoundstart","console","log","Date","onsoundend","onnomatch","onerror","onstart","timeStamp","onend","_","hasAlreadyStarted","isIdle","listen","this","lang_","v","replace","lang","start","stop","EventEmitter","styles","CircleSign","props","icon","CorrectSign","color","IncorrectSign","MicrophoneSign","size","VolumeUpSign","WindowsSign","AppleSign","AndroidSign","GithubSign","TrashSign","TrophySign","ArrowAltCircleRightSign","BarsSign","HomeSign","QuestionCircleSign","CommentsSign","MicrophoneSwitch","isPowerOn","onClick","background","id","apply","useStyles","makeStyles","root","height","width","borderRadius","backgroundColor","border","cursor","container","margin","NativeSpeaker","React","forwardRef","ref","classes","onChangedSentence","onChangeVoice","onSpeak","sentence","selectedVoice","voices","rate","onChangedRate","volume","onChangedVolume","FormControl","required","fullWidth","variant","InputLabel","htmlFor","OutlinedInput","inputRef","type","labelWidth","value","onChange","endAdornment","InputAdornment","position","IconButton","focusVisibleClassName","uttr","SpeechSynthesisUtterance","voice","speechSynthesis","speak","Grid","spacing","alignItems","item","Typography","gutterBottom","xs","Slider","min","max","step","valueLabelDisplay","aria-labelledby","shrink","Select","labelId","name","displayEmpty","map","i","MenuItem","key","ButtonToConvertToTextFileThenDownload","children","text","a","document","createElement","href","encodeURIComponent","download","moment","format","click","InterimTranscript","Row","index","style","data","histories","selectedIndex","setSelectedIndex","toggleItemRemove","ListItem","button","selected","target","ListItemIcon","Checkbox","edge","checked","willRemove","disableRipple","e","ListItemText","primary","StackHistory","title","onRemove","useState","filter","x","length","itemCount","itemSize","itemData","FrequentlyAskedQuestions","colSpan","defaultProps","ToggleButton","others","TabPanels","childrenWithProps","Children","child","cloneElement","isActive","className","TabPanel","other","role","hidden","theme","display","appBar","breakpoints","up","marginLeft","toolbar","mixins","drawerPaper","drawer","flexShrink","menuButton","marginRight","content","flexGrow","palette","default","paddingTop","paddingBottom","drawerItems","to","ResponsiveDrawer","useTheme","mobileOpen","setMobileOpen","handleDrawerToggle","Divider","List","component","Link","undefined","body","AppBar","Toolbar","aria-label","noWrap","Hidden","smUp","implementation","Drawer","anchor","direction","open","onClose","paper","ModalProps","keepMounted","xsDown","SpeechBubble","avatar","userName","Avatar","alt","src","SelfSpeechBubble","timestamp","Status","isAndroid","test","navigator","userAgent","areEqual","b","pattern","RegExp","toLowerCase","forwardedRef","Array","fill","Math","round","random","RowX","unix","unixTimestampSeconds","Element","user","users","pop","hasOwnProperty","TextMessage","message","Stamp","stamp","person","stamp8","stamp27","stamp13","stamp22","Chat","speechDaemonInstance","createSample","s","setHistories","setSentence","messagesEndRef","useRef","contentsRef","setMessage","interimTranscript","setInterimTranscript","inputSentence","concatHistory","concat","handleResult","transcript","buf","resultIndex","results","isFinal","confidence","current","useEffect","on","off","setTimeout","getElementById","scrollIntoView","onSubmit","history","push","preventDefault","library","add","faMicrophone","faPlayCircle","faStopCircle","faVolumeUp","faCircle","fasCircle","faTimes","faWindows","faApple","faAndroid","faGithub","faTrash","faTrophy","faArrowAltCircleRight","faBars","faHome","faHistory","faQuestionCircle","faComments","textAlign","langs","famousQuotes","prototype","skip","n","getVoices","arg","saveHistories","localStorage","setItem","JSON","stringify","App","speechLog","speech","dialect","setDialect","finalTranscript","setFinalTranscript","setIsPowerOn","setVoices","setSelectedVoice","setRate","setVolume","currentTab","setCurrentTab","isTrialRun","setIsTrialRun","famousQuote","setFamousQuote","setDefautVoice","match","reverse","defautVoice","isCorrect","join","error","onvoiceschanged","parse","getItem","locale","reduce","ax","includes","j","hasDialect","kill","handleChangedSentence","exact","path","Tabs","newValue","indicatorColor","textColor","centered","Tab","label","slice","justify","disabled","visibility","padding","alert","floor","splice","restart","sentences","items","Boolean","location","hostname","ReactDOM","render","StrictMode","serviceWorker","ready","then","registration","unregister","catch","module","exports"],"mappings":"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","file":"static/js/main.c3ac3064.chunk.js","sourcesContent":["import {EventEmitter} from 'events';\r\n\r\nexport default class SpeechDaemon extends EventEmitter {\r\n  get lang() { return this.lang_ }\r\n  set lang(v) { this.lang_ = v.replace('_', '-') }// for Android\r\n\r\n  constructor(options) {\r\n    super()\r\n    const SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition;\r\n    const recognition = new SpeechRecognition();\r\n    recognition.interimResults = true;\r\n    recognition.continuous = true;\r\n\r\n    recognition.onresult = (event)=>{\r\n      this.emit(\"result\", event);\r\n    };\r\n    recognition.onsoundstart = (event) => {\r\n      console.log(`${new Date()}認識中...`)\r\n      this.emit(\"soundstart\", null);\r\n    };\r\n    recognition.onsoundend = () => { this.emit(\"soundend\", null) };\r\n    recognition.onnomatch = () => {\r\n      console.log(`${new Date()} 音声を認識できませんでした`)\r\n      this.emit('nomatch', null)\r\n    };\r\n    recognition.onerror = (event) => {\r\n      console.log(event)\r\n      this.emit('error', event)\r\n    };\r\n    recognition.onstart = (event) => {\r\n      console.log(`${new Date()} ${(event.timeStamp)} 音声認識サービス開始 ->>>>>`)\r\n      this.emit('start', null)\r\n    };\r\n    recognition.onend = _ => {\r\n      console.log(`${new Date()} <<<<<- 音声認識サービス切断`)\r\n      this.hasAlreadyStarted = false\r\n      this.emit('end', null)\r\n      if(this.isIdle) return;\r\n      this.listen()\r\n    };\r\n    this.recognition = recognition\r\n    this.isIdle = false\r\n    this.hasAlreadyStarted = false\r\n  }\r\n\r\n  listen() {\r\n    if(this.hasAlreadyStarted) {\r\n      return\r\n    }\r\n    this.hasAlreadyStarted = true\r\n    this.isIdle = false\r\n    if(this.lang) {\r\n      this.recognition.lang = this.lang\r\n    }\r\n    this.recognition.start();\r\n  }\r\n\r\n  kill() {\r\n    this.isIdle = true\r\n    this.recognition.stop();\r\n  }\r\n\r\n  restart() {\r\n    this.isIdle = false\r\n    this.recognition.stop();\r\n  }\r\n}","import css from 'styled-jsx/css'\r\nconst styles = css`\r\n.app {\r\n  text-align: center;\r\n}\r\n\r\n#results {\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  border: 1px solid #ddd;\r\n  padding: 15px;\r\n  text-align: left;\r\n  min-height: 100px;\r\n}\r\n\r\n.recognition {position: relative;}\r\n\r\n.tools {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n}\r\n\r\n.footer a {\r\n  cursor: pointer;\r\n  color: black;\r\n  text-decoration: none;\r\n}\r\n\r\n.training-mode {\r\n  margin: 15px 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.training-mode .button { cursor: \"pointer\"; }\r\n`\r\n\r\nexport default styles","import css from 'styled-jsx/css'\r\n\r\nconst styles = css`\r\n.microphone-switch {\r\n  position: relative;\r\n  z-index: 0;    /* 暫定対応：削除するとアニメーションが無効になります。 */\r\n}\r\n\r\n@keyframes shiny {\r\n  0% {\r\n    transform: scale(0) rotate(25deg);\r\n    opacity: 0;\r\n  }\r\n  50% {\r\n    transform: scale(1) rotate(25deg);\r\n    opacity: 1;\r\n  }\r\n  100% {\r\n    transform: scale(50) rotate(25deg);\r\n    opacity: 0;\r\n  }\r\n}\r\n\r\n.shiny-btn {\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.shiny-btn::after {\r\n  content: '';\r\n  position: absolute;\r\n  top: -100px;\r\n  left: -100px;\r\n  width: 50px;\r\n  height: 50px;\r\n  background-image: linear-gradient(100deg, rgba(255, 255, 255, 0) 10%, rgba(255, 255, 255, 1) 100%, rgba(255, 255, 255, 0) 0%);\r\n  animation-name: shiny;\r\n  animation-duration: 2s;\r\n  animation-timing-function: ease-in-out;\r\n  animation-iteration-count: infinite;\r\n}\r\n\r\n.circle {\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  text-align: center;\r\n}\r\n\r\n.microphone-on,\r\n.microphone-off {\r\n  cursor: pointer;\r\n}\r\n\r\n.microphone-on {\r\n  background: #1373C7;\r\n  width: 48px;\r\n  height: 48px;\r\n  color: #FFF;\r\n}\r\n\r\n.microphone-off {\r\n  background: #FFF;\r\n  width: 38px;\r\n  height: 38px;\r\n  border: solid 5px #ED1C22;\r\n  color: #1373C7;\r\n}\r\n\r\n.heartbeat {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  animation: pounding .1s linear infinite alternate;\r\n  opacity: 0.2;\r\n  z-index: -99;\r\n  background: #1373C7;\r\n  width: 48px;\r\n  height: 48px;\r\n}\r\n\r\n@keyframes pounding {\r\n  0% {\r\n    transform: scale(1.3);\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n  }\r\n}\r\n`\r\n\r\nexport default styles","import React from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\n\r\nexport function CircleSign(props) {\r\n  return <FontAwesomeIcon icon='circle' {...props} />\r\n}\r\n\r\nexport function CorrectSign(props) {\r\n  return <FontAwesomeIcon icon={['far', 'circle']} color=\"green\" {...props} />\r\n}\r\n\r\nexport function IncorrectSign(props) {\r\n  return <FontAwesomeIcon icon=\"times\" color=\"red\" {...props} />\r\n}\r\n\r\nexport function MicrophoneSign(props) {\r\n  return <FontAwesomeIcon icon=\"microphone\" size=\"2x\" />\r\n}\r\n\r\nexport function VolumeUpSign(props) {\r\n  return <FontAwesomeIcon icon=\"volume-up\" size=\"1x\" />\r\n}\r\n\r\nexport function WindowsSign(props) {\r\n  return <FontAwesomeIcon icon={['fab', 'windows']} size=\"2x\" />\r\n}\r\n\r\nexport function AppleSign(props) {\r\n  return <FontAwesomeIcon icon={['fab', 'apple']} size=\"2x\" />\r\n}\r\n\r\nexport function AndroidSign(props) {\r\n  return <FontAwesomeIcon icon={['fab', 'android']} size=\"2x\" />\r\n}\r\n\r\nexport function GithubSign(props) {\r\n  return <FontAwesomeIcon icon={['fab', 'github']} size=\"2x\" />\r\n}\r\n\r\nexport function TrashSign(props) {\r\n  return <FontAwesomeIcon icon=\"trash\" {...props} />\r\n}\r\n\r\nexport function TrophySign(props) {\r\n  return <FontAwesomeIcon icon=\"trophy\" {...props} />\r\n}\r\n\r\nexport function ArrowAltCircleRightSign(props) {\r\n  return <FontAwesomeIcon icon=\"arrow-alt-circle-right\" {...props} />\r\n}\r\n\r\nexport function BarsSign(props) {\r\n  return <FontAwesomeIcon icon=\"bars\" {...props} />\r\n}\r\n\r\nexport function HomeSign(props) {\r\n  return <FontAwesomeIcon icon=\"home\" {...props} />\r\n}\r\n\r\nexport function HistorySign(props) {\r\n  return <FontAwesomeIcon icon=\"history\" {...props} />\r\n}\r\n\r\nexport function QuestionCircleSign(props) {\r\n  return <FontAwesomeIcon icon=\"question-circle\" {...props} />\r\n}\r\n\r\nexport function CommentsSign(props) {\r\n  return <FontAwesomeIcon icon=\"comments\" {...props} />\r\n}\r\n","import React from 'react';\r\nimport styles from './MicrophoneSwitchStyles';\r\nimport { MicrophoneSign } from './app-icons';\r\n\r\nfunction MicrophoneSwitch(props) {\r\n  const { isPowerOn, onClick } = props\r\n  const background = props.background || '#1373C7'\r\n  const handleClick = _ => {\r\n    onClick && onClick.apply()\r\n  }\r\n\r\n  return (\r\n  <div className=\"microphone-switch\">\r\n    <div id=\"microphone\"\r\n         onClick={handleClick}\r\n         className={`circle microphone-${isPowerOn ? 'on shiny-btn' : 'off'}`}>\r\n      <div><MicrophoneSign /></div>\r\n    </div>\r\n    <div id=\"heartbeat\" className={`circle ${isPowerOn ? 'heartbeat' : ''}`}></div>\r\n\r\n    <style jsx>{styles}</style>\r\n  </div>)\r\n}\r\n\r\nexport default MicrophoneSwitch;","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { VolumeUpSign } from './app-icons';\r\nimport {Grid, Slider, Typography, FormControl, Select, InputLabel, MenuItem,\r\n   OutlinedInput, InputAdornment, IconButton } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    height: \"48px\",\r\n    width: \"48px\",\r\n    borderRadius: \"50%\",\r\n    color: \"#fff\",\r\n    backgroundColor: \"#1976d2\",\r\n    border: 0,\r\n    cursor: \"pointer\",\r\n    \"&:hover\": {\r\n      color: \"#fff\",\r\n      backgroundColor: \"#1976d2\",\r\n    }\r\n  },\r\n  container: {\r\n    margin: \"0 auto\",\r\n    width: \"99%\",\r\n  }\r\n});\r\n\r\nconst NativeSpeaker = React.forwardRef(function(props, ref) {\r\n  const classes = useStyles();\r\n  const {\r\n    onChangedSentence, onChangeVoice, onSpeak,\r\n    sentence, selectedVoice, voices,\r\n    rate, onChangedRate,\r\n    volume, onChangedVolume\r\n  } = props\r\n\r\n  const handleSpeak = _ => {\r\n    onSpeak && onSpeak(sentence)\r\n    const uttr = new SpeechSynthesisUtterance(sentence)\r\n    uttr.voice = selectedVoice\r\n    uttr.lang = selectedVoice.lang.replace('_', '-')// for Android\r\n    if(rate && (rate >= 0.1 && rate <= 10)) {\r\n      uttr.rate = rate\r\n    }\r\n    if(volume && (volume >= 0 && volume <= 1)) {\r\n      uttr.volume = volume\r\n    }\r\n    speechSynthesis.speak(uttr)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <FormControl required fullWidth variant=\"outlined\">\r\n        <InputLabel htmlFor=\"outlined-adornment-sentence\">台詞</InputLabel>\r\n        <OutlinedInput\r\n          inputRef={ref}\r\n          id=\"outlined-adornment-sentence\"\r\n          type='text'\r\n          labelWidth={50}\r\n          value={sentence}\r\n          onChange={onChangedSentence}\r\n          endAdornment={\r\n            <InputAdornment position=\"end\">\r\n              <IconButton focusVisibleClassName={\"a\"} classes={{root: classes.root}} onClick={handleSpeak} size=\"small\"><VolumeUpSign /></IconButton>\r\n            </InputAdornment>\r\n          }\r\n          \r\n        />\r\n      </FormControl>\r\n      {/*\r\n      <button onClick={_ => speechSynthesis.pause()}>一時停止</button>\r\n      <button onClick={_ => speechSynthesis.resume()}>再開</button>\r\n      */}\r\n\r\n      <Grid container spacing={2} alignItems=\"center\" classes={{root: classes.container}}>\r\n        <Grid item>\r\n          <Typography id=\"input-slider\" gutterBottom>速度</Typography>\r\n        </Grid>\r\n        <Grid item xs>\r\n          <Slider min={0.1} max={10.0} step={0.1} value={rate}\r\n                  onChange={onChangedRate}\r\n                  valueLabelDisplay=\"auto\"\r\n                  aria-labelledby=\"input-slider\" />\r\n        </Grid>\r\n        <Grid item><Typography>{rate}</Typography></Grid>\r\n      </Grid>\r\n\r\n      <Grid container spacing={2} alignItems=\"center\" classes={{root: classes.container}}>\r\n        <Grid item>\r\n          <Typography id=\"volume-slider\" gutterBottom>音量</Typography>\r\n        </Grid>\r\n        <Grid item xs>\r\n          <Slider min={0} max={1} step={0.1} value={volume}\r\n                  onChange={onChangedVolume}\r\n                  valueLabelDisplay=\"auto\"\r\n                  aria-labelledby=\"volume-slider\" />\r\n        </Grid>\r\n        <Grid item><Typography>{volume}</Typography></Grid>\r\n      </Grid>\r\n\r\n      <FormControl>\r\n        <InputLabel shrink id=\"selectVoicesLabel\">\r\n          言語\r\n        </InputLabel>\r\n        <Select\r\n          labelId=\"selectVoicesLabel\"\r\n          value={selectedVoice.name}\r\n          onChange={onChangeVoice}\r\n          displayEmpty\r\n        >\r\n        {\r\n          voices\r\n          .map((voice, i) => {\r\n            return (<MenuItem key={i} value={voice.name}>{`${voice.name} (${voice.lang})`}</MenuItem>)\r\n          })            \r\n        }\r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default NativeSpeaker;","import React from 'react';\r\nimport moment from 'moment';\r\n\r\nexport default function ButtonToConvertToTextFileThenDownload(props) {\r\n  const {children, text} = props\r\n  const downloadTextFile = () => {\r\n    const a = document.createElement('a');\r\n    a.href = 'data:text/plain,' + encodeURIComponent(text);\r\n    a.download = `log${moment().format('_YYYYMMDD_HHmmss')}.txt`;\r\n    a.click();\r\n  }\r\n\r\n   return (<button onClick={downloadTextFile}>{children}</button>)\r\n}","import React from 'react';\r\n\r\nexport default function InterimTranscript(props) {\r\n  return (\r\n  <>\r\n    <span>{props.children}</span>\r\n    <style jsx>{`\r\n    span {color: gray;}\r\n    `}</style>\r\n  </>)\r\n}","import React, { useState } from 'react';\r\nimport { ListItem, ListItemText, ListItemIcon, Checkbox, IconButton } from '@material-ui/core';\r\nimport { FixedSizeList } from 'react-window';\r\nimport { TrashSign, CircleSign } from './app-icons';\r\n\r\nconst NUMBER_OF_ROWS = 7\r\n\r\nconst Row = ({ index, style, data }) => {\r\n  const { histories, selectedIndex, setSelectedIndex, onChange, toggleItemRemove } = data;\r\n  const handleClick = _ => {\r\n    setSelectedIndex(index)\r\n    histories[index] && onChange && onChange({target:{value: histories[index].sentence}})\r\n  }\r\n  const handleChange = e => {\r\n    const checked = e.target.checked\r\n    toggleItemRemove && toggleItemRemove({checked, index})\r\n  }\r\n\r\n  return (\r\n    <ListItem button style={style} key={index} selected={selectedIndex === index} onClick={handleClick}>\r\n      <ListItemIcon>\r\n        <Checkbox\r\n          edge=\"start\"\r\n          checked={!!histories[index].willRemove}\r\n          icon={<CircleSign color=\"#1976d2\" />}\r\n          disableRipple\r\n          onChange={handleChange}\r\n        />\r\n      </ListItemIcon>\r\n      <ListItemText primary={histories[index].sentence} />\r\n    </ListItem>\r\n  )\r\n}\r\n\r\nexport default function StackHistory(props) {\r\n  const { title, histories, onChange, size, onRemove, toggleItemRemove } = props\r\n  const [selectedIndex, setSelectedIndex] = useState(null)\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"stack-history-header\">\r\n        <span>\r\n          {(histories.filter(x => x.willRemove).length > 0) &&\r\n            <IconButton onClick={onRemove}><TrashSign /></IconButton>\r\n          }\r\n        </span>\r\n        <p>{title}</p>\r\n      </div>\r\n\r\n      <FixedSizeList\r\n        height={size * NUMBER_OF_ROWS}\r\n        itemCount={histories.length}\r\n        itemSize={size}\r\n        width={\"100%\"}\r\n        itemData={{histories, selectedIndex, setSelectedIndex, onChange, toggleItemRemove}}\r\n      >\r\n        {Row}\r\n      </FixedSizeList>\r\n      <style jsx>{`\r\n      .stack-history-header { position: relative; }\r\n      .stack-history-header span {\r\n        position: absolute;\r\n        right: 10px;\r\n      }\r\n      `}</style>\r\n    </div>\r\n  )\r\n}\r\n\r\nStackHistory.defaultProps = {\r\n  title: '履歴',\r\n  size: 35,\r\n};","import React from 'react';\r\nimport { CorrectSign, IncorrectSign, WindowsSign, AppleSign, AndroidSign } from './app-icons';\r\n\r\nexport default function FrequentlyAskedQuestions() {\r\n  return (\r\n    <>\r\n      <h2>よくある質問</h2>\r\n      <h3>使用方法を教えて？</h3>\r\n      <ol className=\"text-left\">\r\n        <li>ドラマ・映画の名言を入力しましょう。</li>\r\n        <li>スピーカーアイコンをタップして、発音を聞きます。</li>\r\n        <li>マイクアイコンをタップして、マイクONにします。</li>\r\n        <li>役者になったつもりで、聞こえたとおりに喋ってみましょう。</li>\r\n      </ol>\r\n\r\n      <h3>動作しないけど...</h3>\r\n      Chromeブラウザで動作します。\r\n      <table className=\"qa\">\r\n        <thead>\r\n          <tr>\r\n            <th colSpan=\"2\">対応デバイス</th>\r\n            <th>可否</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td><WindowsSign/></td>\r\n            <td className=\"text-left\">PC</td>\r\n            <td><CorrectSign size=\"2x\"/></td>\r\n          </tr>\r\n          <tr>\r\n            <td><AndroidSign/></td>\r\n            <td className=\"text-left\">Android</td>\r\n            <td><CorrectSign size=\"2x\"/></td>\r\n          </tr>\r\n          <tr>\r\n            <td><AppleSign/></td>\r\n            <td className=\"text-left\">iPhone</td>\r\n            <td><IncorrectSign size=\"2x\"/></td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n      <h3>過去の台詞について</h3>\r\n      <p className=\"text-left\">\r\n        スピーカーアイコンを押して、ネイティブの発音を聞くと、台詞を履歴に記録します。<br/>\r\n        スピーカーアイコンを押さないと、履歴には何も残りません。<br/>\r\n        履歴から台詞を選択することもできます。\r\n      </p>\r\n\r\n      <style jsx>{`\r\n      .qa {margin: 10px auto;}\r\n      .text-left {text-align: left;}\r\n      `}</style>\r\n    </>\r\n  )\r\n}","import React from 'react';\r\nimport css from 'styled-jsx/css'\r\nconst styles = css`\r\nlabel input[type=\"checkbox\"] {\r\n  position: absolute;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n}\r\nlabel .icon {\r\n  position: relative;\r\n  width: 48px;\r\n  height: 48px;\r\n  background: #18191f;\r\n  color: #555;\r\n  font-size: 24px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  margin: 0 10px;\r\n  box-shadow:\r\n  -1px 1px 4px rgba(255,255,255, 0.05),\r\n  4px 4px 6px rgba(0,0,0, 0.2),\r\n  inset 1px 1px 4px rgba(255,255,255, 0.05),\r\n  inset 1px 1px 1px rgba(0,0,0, 1);\r\n  overflow: hidden;\r\n  border-radius: 10px;\r\n}\r\n\r\nlabel input[type=\"checkbox\"]:checked ~ .icon {\r\n  color: #00f3ff;\r\n  /*text-shadow: 0 0 15px #00f3ff,\r\n  0 0 25px #00f3ff;\r\n  animation: colors 5s linear infinite;*/\r\n}\r\n`\r\n\r\nexport default function ToggleButton(props) {\r\n  const { children, ...others } = props\r\n\r\n  return (\r\n    <>\r\n      <label>\r\n        <input type=\"checkbox\" {...others} />\r\n        <div className=\"icon\">\r\n          {children}\r\n        </div>\r\n      </label>\r\n      <style jsx>{styles}</style>\r\n    </>\r\n  )\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default function TabPanels(props) {\r\n  const { children, value } = props;\r\n  const childrenWithProps = React.Children.map(\r\n    children,\r\n    (child, i) => {\r\n      return React.cloneElement(child, {\r\n        index: i,\r\n        isActive: (value === i),\r\n      });\r\n    },\r\n  );\r\n\r\n  return (\r\n  <div className=\"TabPanels-root\">{childrenWithProps}</div>\r\n  )\r\n}\r\n\r\nTabPanels.propTypes = {\r\n  children: PropTypes.oneOfType([\r\n    PropTypes.element,\r\n    PropTypes.arrayOf(PropTypes.element),\r\n  ]).isRequired,\r\n  value: PropTypes.number,\r\n};\r\n\r\nTabPanels.defaultProps = {\r\n  value: 0,\r\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default function TabPanel(props) {\r\n  const { children, index, isActive, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={!isActive}\r\n      id={`tabpanel-${index}`}\r\n      aria-labelledby={`tab-${index}`}\r\n      {...other}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n};\r\n","import React, { useState } from 'react';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport { GithubSign, QuestionCircleSign, BarsSign, HomeSign, CommentsSign } from './app-icons';\r\nimport { Typography, AppBar, Toolbar, Divider, Hidden,\r\n  Drawer, List, ListItem, ListItemIcon, ListItemText, IconButton } from '@material-ui/core';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst drawerWidth = 240;\r\nconst headerNavigationHeight = 56;\r\nconst bottomNavigationHeight = 56;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  appBar: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: `calc(100% - ${drawerWidth}px)`,\r\n      marginLeft: drawerWidth,\r\n    },\r\n  },\r\n  toolbar: theme.mixins.toolbar,\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n  },\r\n  drawer: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: drawerWidth,\r\n      flexShrink: 0,\r\n    },\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'none',\r\n    },\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.default,\r\n    paddingTop: `calc(0px + ${headerNavigationHeight}px)`,\r\n    paddingBottom: `calc(0px + ${bottomNavigationHeight}px)`,\r\n    [theme.breakpoints.up('sm')]: {\r\n      paddingBottom: 10,\r\n    },\r\n  },\r\n}));\r\n\r\nconst drawerItems = [\r\n  {text: 'ホーム', icon: <HomeSign size=\"2x\"/>, to: '/shadowing/'},\r\n  {text: 'チャット', icon: <CommentsSign size=\"2x\"/>, to: '/shadowing/chat'},\r\n  {text: 'よくある質問', icon: <QuestionCircleSign size=\"2x\"/>, to: '/shadowing/faq'},\r\n  {text: 'GitHub', icon: <GithubSign size=\"2x\"/>, to: '//github.com/GangDuo/shadowing', target: \"_blank\"},\r\n];\r\n\r\nexport default function ResponsiveDrawer({children}) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [mobileOpen, setMobileOpen] = useState(false);\r\n\r\n  const handleDrawerToggle = () => {\r\n    setMobileOpen(!mobileOpen);\r\n  };\r\n\r\n  const drawer = (\r\n    <div>\r\n      <div className={classes.toolbar} />\r\n      <Divider />\r\n      <List>\r\n        {drawerItems.map((x) => (\r\n          <ListItem button component={Link}\r\n                    to={x.to} key={x.text}\r\n                    target={x.target || \"_self\"}\r\n                    onClick={handleDrawerToggle}>\r\n            <ListItemIcon>{x.icon}</ListItemIcon>\r\n            <ListItemText primary={x.text} />\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n      <Divider />\r\n      <List>\r\n        <ListItem button component={Link}\r\n                  to=\"/shadowing/version\"\r\n                  onClick={handleDrawerToggle}>\r\n          <ListItemText primary=\"バージョン\" />\r\n        </ListItem>\r\n      </List>\r\n    </div>\r\n  );\r\n\r\n  const container = window !== undefined ? () => window.document.body : undefined;\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar position=\"fixed\" className={classes.appBar}>\r\n        <Toolbar>\r\n          <IconButton\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            onClick={handleDrawerToggle}\r\n            edge=\"start\"\r\n            className={classes.menuButton}\r\n          >\r\n            <BarsSign />\r\n          </IconButton>\r\n          <Typography variant=\"h6\" noWrap>シャドーイング</Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <nav className={classes.drawer}>\r\n        <Hidden smUp implementation=\"css\">\r\n          <Drawer\r\n            container={container}\r\n            variant=\"temporary\"\r\n            anchor={theme.direction === 'rtl' ? 'right' : 'left'}\r\n            open={mobileOpen}\r\n            onClose={handleDrawerToggle}\r\n            classes={{\r\n              paper: classes.drawerPaper,\r\n            }}\r\n            ModalProps={{\r\n              keepMounted: true, // Better open performance on mobile.\r\n            }}\r\n          >\r\n            {drawer}\r\n          </Drawer>\r\n        </Hidden>\r\n        <Hidden xsDown implementation=\"css\">\r\n          <Drawer\r\n            classes={{\r\n              paper: classes.drawerPaper,\r\n            }}\r\n            variant=\"permanent\"\r\n            open\r\n          >\r\n            {drawer}\r\n          </Drawer>\r\n        </Hidden>\r\n      </nav>\r\n      <main className={classes.content}>\r\n        {children}\r\n      </main>\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\n\r\nexport default function SpeechBubble({children, avatar, userName}) {\r\n  const Avatar = () => {\r\n    if(!avatar) return <></>\r\n    return (\r\n      <figure>\r\n        <img alt={userName} src={avatar} />\r\n        <style jsx>{`\r\n        figure {\r\n          width: 50px;\r\n          /*\r\n          position: absolute;\r\n          top: 15px;\r\n          left: 0;\r\n          */\r\n          padding: 0;\r\n          margin: 0;\r\n        }\r\n        figure img{\r\n          border-radius: 50%;\r\n          width: 50px;\r\n          height: 50px;\r\n        }\r\n        `}</style>\r\n      </figure>\r\n    )\r\n  }\r\n\r\n  return (<>\r\n    {/*<!-- 相手の吹き出し -->*/}\r\n    <div className={\"line__left\"}>\r\n      <Avatar/>\r\n\r\n      <div className={\"line__left-text\"}>\r\n        <div className=\"name\">{userName}</div>\r\n        {children}\r\n      </div>\r\n    </div>\r\n    <style jsx>{`\r\n    .line__left {\r\n      width: 100%;\r\n      position: relative;\r\n      display: block;\r\n      margin-bottom: 5px;\r\n      max-width: 80%;\r\n      clear: both;\r\n\r\n      display: flex;\r\n    }\r\n    .line__left-text {\r\n      margin-left: 20px;\r\n    }\r\n    .line__left-text .name {\r\n      font-size: 80%;\r\n      color: #ffffff;\r\n    }\r\n    `}</style>\r\n  </>)\r\n}\r\n","import React from 'react';\r\n\r\nconst SelfSpeechBubble = React.forwardRef(function ({children, timestamp, ...others}, ref) {\r\n  const Status = () => {\r\n    if(!timestamp) return <></>\r\n    return <span className=\"date\">既読<br/>{timestamp}</span>\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/*<!-- 自分の吹き出し -->*/}\r\n      <div className=\"line__right\" ref={ref} >\r\n        <Status/>\r\n        {children}\r\n      </div>\r\n      <style jsx>{`\r\n      .line__right {\r\n        position: relative;\r\n        display: block;\r\n        margin: 5px 0;\r\n        max-width: 75%;\r\n        float: right;\r\n        margin-right: 15px;\r\n        clear: both;\r\n        \r\n        display: flex;\r\n        justify-content: flex-end;\r\n        align-items: flex-end;\r\n      }\r\n      `}</style>\r\n    </>\r\n  )\r\n})\r\n\r\nexport default SelfSpeechBubble;","export function isString (obj) {\r\n  return 'String' === Object.prototype.toString.call(obj).slice(8, -1)\r\n}\r\n\r\nexport function isAndroid() { /(android)/i.test(navigator.userAgent) }\r\n\r\nexport function areEqual(a, b) {\r\n  const pattern = new RegExp(/[\\s!',-\\.\\?’、。]/, 'g')\r\n  const [actual, expected] = [a, b].map(x => x.replace(pattern, '').toLowerCase())\r\n  return actual === expected\r\n}","import React, { useRef, useEffect } from 'react';\r\nimport moment from 'moment';\r\nimport person from '../../icon.png';\r\nimport stamp8 from '../../stamp/8.png';\r\nimport stamp13 from '../../stamp/13.png';\r\nimport stamp22 from '../../stamp/22.png';\r\nimport stamp27 from '../../stamp/27.png';\r\nimport SpeechBubble from './SpeechBubble';\r\nimport SelfSpeechBubble from './SelfSpeechBubble';\r\nimport { speak } from '../../helpers/speakeroid';\r\nimport {isAndroid, areEqual} from '../../helpers/validation';\r\n/*\r\nimport { VariableSizeList as List } from 'react-window';\r\nimport { DynamicSizeList as DynamicList } from 'react-window-dynamic';\r\nimport AutoSizer from 'react-virtualized-auto-sizer';\r\n*/\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport {VolumeUpSign} from '../app-icons';\r\nimport css from 'styled-jsx/css'\r\nconst styles = css``\r\n\r\nconst RefForwardedRow = React.forwardRef((props, ref) => (\r\n  <RowX {...props} forwardedRef={ref} />\r\n));\r\n\r\n/*\r\nconst Row = React.forwardRef(function({children, ...others}, ref) {\r\n  return (<div {...others} ref={ref}>{children}</div>)\r\n})\r\n*/\r\nconst rowHeights = new Array(1000)\r\n  .fill(true)\r\n  .map(() => 25 + Math.round(Math.random() * 50));\r\n \r\nconst getItemSize = index => rowHeights[index];\r\n\r\nconst Row = ({ index, style }) => (\r\n  <div className={index % 2 ? 'ListItemOdd' : 'ListItemEven'} style={style}>\r\n    Row {index}\r\n  </div>\r\n);\r\n/////////////////////////////////////////////////////\r\nconst RowX = ({ data, index, style, forwardedRef }) => {\r\n  const x = data[index]\r\n  const timestamp = moment.unix(x.unixTimestampSeconds).format(\"H:m\")\r\n  let Element = x.user === 0 ? SelfSpeechBubble : SpeechBubble\r\n  const user = users.filter(user => user.id === x.user).pop()\r\n  user && (user.userName = user.name);\r\n  let children = <></>\r\n\r\n  if(x.hasOwnProperty('message')) {\r\n    children = <TextMessage>{x.message}</TextMessage>\r\n  }\r\n  if(x.hasOwnProperty('stamp')) {\r\n    children = <Stamp>{x.stamp}</Stamp>\r\n  }          \r\n  return (\r\n    <Element timestamp={timestamp} {...user} ref={forwardedRef}>\r\n      {children}\r\n    </Element>\r\n  )\r\n\r\n  return (\r\n  <div\r\n    ref={forwardedRef}\r\n    className={index % 2 ? \"ListItemOdd\" : \"ListItemEven\"}\r\n    style={style}\r\n  >\r\n    {data[index]}\r\n  </div>\r\n  )\r\n};\r\n\r\nfunction TextMessage({children}) {\r\n  return <div className=\"text\">{children}</div>\r\n}\r\n\r\nfunction Stamp({children}) {\r\n  return (\r\n    <div className=\"stamp\">\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst users = [{\r\n  id: 1,\r\n  name: 'うさきち',\r\n  avatar: person,\r\n}]\r\n\r\nconst histories_ = [\r\n  {\r\n    user: 1,\r\n    unixTimestampSeconds: moment().unix(),\r\n    message: <>\r\n      I'm going to make him an offer he can't refuse.\r\n      <IconButton color=\"primary\" aria-label=\"\" component=\"span\" onClick={_ => alert('speak')}>\r\n        <VolumeUpSign />\r\n      </IconButton>\r\n    </>\r\n  },\r\n  {\r\n    user: 1,\r\n    unixTimestampSeconds: moment().unix(),\r\n    message: \"発音してみて\"\r\n  },\r\n  {\r\n    user: 0,\r\n    unixTimestampSeconds: moment().unix(),\r\n    message: \"I'm going to make him an offer he can't refuse.\"\r\n  },\r\n  {\r\n    user: 1,\r\n    unixTimestampSeconds: moment().unix(),\r\n    stamp: <img src={stamp8} />\r\n  },\r\n  {\r\n    user: 0,\r\n    unixTimestampSeconds: moment().unix(),\r\n    message: \"I'm going to make him an\"\r\n  },\r\n  {\r\n    user: 1,\r\n    unixTimestampSeconds: moment().unix(),\r\n    stamp: <img src={stamp27} />\r\n  },\r\n  {\r\n    user: 1,\r\n    unixTimestampSeconds: moment().unix(),\r\n    message: \"ねぇねぇ、帰ってくるのおそいんだけど！！今どこいまどこいまどこーー\"\r\n  },\r\n  {\r\n    user: 1,\r\n    unixTimestampSeconds: moment().unix(),\r\n    stamp: <img src={stamp13} />\r\n  },\r\n  {\r\n    user: 1,\r\n    unixTimestampSeconds: moment().unix(),\r\n    message: \"今から帰るよー\"\r\n  },\r\n  {\r\n    user: 0,\r\n    unixTimestampSeconds: moment().unix(),\r\n    message: \"了解！寝過ごさないようにだよ〜風呂ためとこ\"\r\n  },\r\n  {\r\n    user: 0,\r\n    unixTimestampSeconds: moment().unix(),\r\n    stamp: <img src={stamp22} />\r\n  }\r\n]\r\n\r\nexport default function Chat({voice, rate, volume, speechDaemonInstance}) {\r\n  const createSample = (s) => {\r\n    return [{\r\n      user: 1,\r\n      unixTimestampSeconds: moment().unix(),\r\n      message: <>\r\n        {s}\r\n        <IconButton color=\"primary\" aria-label=\"\" component=\"span\"\r\n                    onClick={_ => {\r\n                      speak({\r\n                        sentence: s,\r\n                        voice, rate, volume\r\n                      })\r\n                    }}>\r\n          <VolumeUpSign />\r\n        </IconButton>\r\n      </>\r\n    },{\r\n      user: 1,\r\n      unixTimestampSeconds: moment().unix(),\r\n      message: \"発音してみて\"\r\n    }]\r\n  }\r\n  const [histories, setHistories] = React.useState(createSample('apple'));\r\n  const [sentence, setSentence] = React.useState('apple');\r\n  const messagesEndRef = useRef(null);\r\n  const contentsRef = useRef();\r\n  const listRef = useRef(null);\r\n  const listOuterRef = useRef();\r\n  const [listHeight, setListHeight] = React.useState(1);\r\n  const [message, setMessage] = React.useState('');\r\n  const [interimTranscript, setInterimTranscript] = React.useState('ここに表示する');\r\n  const inputSentence = useRef();\r\n  const handleChange = (event) => {\r\n    setMessage(event.target.value);\r\n  }\r\n  const appendHistory = (history) => {\r\n    setHistories(x => {\r\n      x.push(history)\r\n      return x.concat()\r\n    })\r\n  }\r\n  const concatHistory = (xs) => {\r\n    setHistories(x => x.concat(xs))\r\n  }\r\n  const handleSubmit = (event) => {\r\n    appendHistory({\r\n      user: 0,\r\n      unixTimestampSeconds: moment().unix(),\r\n      message: message\r\n    })\r\n    \r\n\r\n   //messagesEndRef.current.scrollIntoView(false)\r\n   /* \r\n   setImmediate(() => {\r\n    document.getElementById('root').scrollIntoView(false)\r\n   });\r\n   */\r\n\r\n    //alert('A name was submitted: ' + message);\r\n    \r\n    setMessage('');\r\n    event.preventDefault();\r\n    //alert(window.getComputedStyle(contentsRef.current).height)\r\n  }\r\n\r\n  const handleResult = (event) => {\r\n    console.log('start on chat')\r\n    let transcript = ''\r\n    let buf = ''\r\n    for (let i = event.resultIndex; i < event.results.length; i++) {\r\n      transcript = event.results[i][0].transcript;\r\n      if (event.results[i].isFinal && (!isAndroid() || event.results[i][0].confidence > 0)) {\r\n        // judgment\r\n        concatHistory([{\r\n          user: 0,\r\n          unixTimestampSeconds: moment().unix(),\r\n          message: transcript\r\n        },/*{\r\n          user: 1,\r\n          unixTimestampSeconds: moment().unix(),\r\n          message: `${areEqual(transcript, inputSentence.current.value)} 私：${inputSentence.current.value}`\r\n        },*/{\r\n          user: 1,\r\n          unixTimestampSeconds: moment().unix(),\r\n          stamp: areEqual(transcript, inputSentence.current.value) ? <img src={stamp8} /> : <img src={stamp27} />\r\n        }])      \r\n      } else {\r\n        buf += transcript\r\n      }\r\n      setInterimTranscript(buf)\r\n    }\r\n  }\r\n\r\n  useEffect(_ => {\r\n    console.log('init Chat')\r\n    speechDaemonInstance.on('result', handleResult)\r\n    return _ => {\r\n      console.log('finalize Chat')\r\n      speechDaemonInstance.off('result', handleResult)\r\n    }\r\n  }, [])\r\n\r\n  useEffect(_ => {\r\n    console.log('after render')\r\n    setTimeout(() => {\r\n      document.getElementById('root').scrollIntoView(false)\r\n    }, 500);\r\n  })\r\n\r\n  /*\r\n  const scrollToBottomOfList = React.useCallback(() => {\r\n    messagesEndRef.current.scrollIntoView({\r\n      behavior: 'smooth',\r\n      block: 'end',\r\n    })\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [ messagesEndRef ])\r\n  useEffect(_ => {\r\n    scrollToBottomOfList()\r\n  }, [])\r\n  */\r\n\r\n  useEffect(_ => {\r\n    //const h = Number(window.getComputedStyle(listRef.current).height.replace(\"px\", \"\"))\r\n    //alert(h)\r\n    //setListHeight(h)\r\n  })\r\n  /*\r\n  useEffect(_ => {\r\n    let listHeight = 0\r\n    setInterval(function() {\r\n      const h = Number(window.getComputedStyle(listOuterRef.current).height.replace(\"px\", \"\"))\r\n      if(listHeight === h) return\r\n      console.log(`${listHeight}:${h}`)\r\n      listHeight = h\r\n    }, 500);\r\n  }, [])\r\n  */\r\n\r\n  console.log('render Chat')\r\n  return (<>\r\n    {/*<!-- ▼LINE風ここから -->*/}\r\n    <div className=\"line__container\">\r\n      {/*<!-- タイトル -->*/}\r\n      <div className=\"line__title sticky\">\r\n        うさきち友の会\r\n      </div>\r\n  \r\n      {/*<!-- ▼会話エリア scrollを外すと高さ固定解除 -->*/}\r\n      {/*\r\n      <AutoSizer>\r\n        {({height, width}) => (\r\n        <DynamicList\r\n          className=\"List\"\r\n          height={height}\r\n          itemCount={histories.length}\r\n          itemData={histories}\r\n          width=\"100%\"\r\n          ref={listRef}\r\n        >\r\n          {RowX}\r\n        </DynamicList>\r\n        )}\r\n      </AutoSizer>\r\n      <button className=\"ExampleButton\" onClick={() => {\r\n        listRef.current.scrollToItem(histories.length-1);\r\n      }}>\r\n        Scroll to row 200 (align: auto)\r\n      </button>\r\n*/}\r\n      {/*\r\n      <List ref={listRef} outerRef={listOuterRef} className=\"listWapper\"\r\n        height={100}\r\n        itemCount={1000}\r\n        itemSize={getItemSize}\r\n        width={\"100%\"}\r\n        style={{flexGrow: 1}}>\r\n          {Row}\r\n      </List>\r\n      <button className=\"ExampleButton\" onClick={() => {\r\n        listRef.current.scrollToItem(200);\r\n      }}>\r\n        Scroll to row 200 (align: auto)\r\n      </button>\r\n       */}\r\n\r\n\r\n      <div className=\"line__contents _scroll\" ref={contentsRef}>\r\n\r\n       {/*\r\n        <SpeechBubble avatar={person}\r\n                      userName={\"うさきち\"}>\r\n          <TextMessage>ねぇねぇ、帰ってくるのおそいんだけど！！今どこいまどこいまどこーー</TextMessage>\r\n        </SpeechBubble>\r\n       */}\r\n  \r\n        {/*<!-- 相手のスタンプ -->\r\n        <SpeechBubble avatar={person}\r\n                      userName={\"うさきち\"}>\r\n          <Stamp><img src={stamp13} /></Stamp>\r\n        </SpeechBubble>\r\n  \r\n        <SpeechBubble avatar={person}\r\n                      userName={\"うさきち\"}>\r\n          <TextMessage>今から帰るよー</TextMessage>\r\n        </SpeechBubble>\r\n\r\n        <SelfSpeechBubble timestamp=\"0:30\">\r\n          <TextMessage>了解！寝過ごさないようにだよ〜風呂ためとこ</TextMessage>\r\n        </SelfSpeechBubble>\r\n        */}\r\n  \r\n        {/*<!-- 自分のスタンプ -->\r\n        <SelfSpeechBubble timestamp=\"0:30\">\r\n          <Stamp><img src={stamp22} /></Stamp>\r\n        </SelfSpeechBubble>\r\n        */}\r\n\r\n        {histories.map((x, i, xs) => {\r\n          const timestamp = moment.unix(x.unixTimestampSeconds).format(\"H:m\")\r\n          let Element = x.user === 0 ? SelfSpeechBubble : SpeechBubble\r\n          const user = users.filter(user => user.id === x.user).pop()\r\n          user && (user.userName = user.name);\r\n          let children = <></>\r\n\r\n          if(x.hasOwnProperty('message')) {\r\n            children = <TextMessage>{x.message}</TextMessage>\r\n          }\r\n          if(x.hasOwnProperty('stamp')) {\r\n            children = <Stamp>{x.stamp}</Stamp>\r\n          }          \r\n          return (\r\n            <Element timestamp={timestamp} key={i} id={(xs.length===(i+1)) ? 'onoda1' : ''} {...user} ref={xs.length===(i+1) ? messagesEndRef : null}>\r\n              {children}\r\n            </Element>\r\n          )\r\n        })}\r\n        \r\n\r\n      </div>\r\n      {/*<!--　▲会話エリア ここまで -->*/}\r\n      \r\n      <div className=\"line__footer bottom-navigation\">\r\n        <div className=\"d-flex\">\r\n          <div>+,camera,explore</div>\r\n          <form onSubmit={handleSubmit}>\r\n            <input type=\"text\" style={{width: \"80px\"}} value={message} onChange={handleChange} />\r\n            <button>send</button>\r\n          </form>\r\n          <form onSubmit={(event) => {\r\n            const s = 'English'\r\n            setSentence(s)\r\n            concatHistory(createSample(s))\r\n            event.preventDefault();\r\n          }}>\r\n            <button>次へ</button>\r\n            <input type=\"hidden\" value={sentence} ref={inputSentence} />\r\n          </form>\r\n        </div>\r\n\r\n        <div>{interimTranscript}</div>\r\n      </div>\r\n      \r\n      <style jsx>{`\r\n      .d-flex {\r\n        display: flex;\r\n      }\r\n      .line__container {\r\n        padding:0;\r\n        background: #7494c0;\r\n        /*overflow: hidden;*/\r\n        max-width: 400px;\r\n        margin: 0px auto;\r\n        font-size: 80%;\r\n        \r\n        height: 100%;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-between;\r\n        max-width: 100%;\r\n        text-align: left;\r\n      }\r\n      .line__title {\r\n        background: #273246;\r\n        padding: 10px;\r\n        text-align: center;\r\n        font-size: 150%;\r\n        color: #ffffff;\r\n      }\r\n      .line__contents {\r\n        padding: 10px;\r\n        /*overflow: hidden;*/\r\n        line-height: 135%;\r\n\r\n        flex-grow: 1;\r\n      }\r\n      \r\n      .line__container .scroll {\r\n        overflow-y: scroll;\r\n      }\r\n      .line__footer {\r\n        display: flex;\r\n        flex-direction: column;\r\n        background: #ddd;\r\n        padding: 10px;\r\n        text-align: center;\r\n        font-size: 150%;\r\n        color: #666;\r\n      }\r\n      .sticky {\r\n        position: -webkit-sticky; /* Safari用 */\r\n        position: sticky; /* 要素をスクロールに応じて固定 */\r\n        top: 56px; /* 縦スクロールに追従 */\r\n        z-index: 100; /* z-indexで最前面に持ってくる */\r\n      }\r\n      .bottom-navigation {\r\n        position: fixed;\r\n        bottom: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        z-index: 99;\r\n      }\r\n      `}</style>\r\n      <style jsx global>{`\r\n      .line__container .line__left .text {\r\n        margin: 0;\r\n        position: relative;\r\n        padding: 10px;\r\n        border-radius: 20px;\r\n        background-color: #ffffff;\r\n      }\r\n      .line__container .line__left .text::after {\r\n        content: '';\r\n        position: absolute;\r\n        display: block;\r\n        width: 0;\r\n        height: 0;\r\n        left: -10px;\r\n        top: 10px;\r\n        border-right: 20px solid #ffffff;\r\n        border-top: 10px solid transparent;\r\n        border-bottom: 10px solid transparent;\r\n      }\r\n\r\n      .line__container .line__right .text {\r\n        padding: 10px;\r\n        border-radius: 20px;\r\n        background-color: #8de055;\r\n        margin: 0;\r\n        margin-left: 10px;\r\n      }\r\n      .line__container .line__right .text::after {\r\n        content: '';\r\n        position: absolute;\r\n        display: block;\r\n        width: 0;\r\n        height: 0;\r\n        right: -10px;\r\n        top: 10px;\r\n        border-left: 20px solid #8de055;\r\n        border-top: 10px solid transparent;\r\n        border-bottom: 10px solid transparent;\r\n      }\r\n      .line__container .line__right .stamp {\r\n        position: relative;\r\n        margin-left: 80px;\r\n      }\r\n      .line__container .line__right .date {\r\n        content: '';\r\n        /*position: absolute;\r\n        */\r\n        display: block;\r\n        width: 100px;\r\n        text-align: right;\r\n        /*\r\n        left: -30px;\r\n        bottom: 0px;\r\n        */\r\n        font-size: 80%;\r\n        color: #ffffff;\r\n      }\r\n  \r\n      .line__container .stamp img {\r\n        max-width:150px;\r\n      }\r\n      `}</style>\r\n    </div>\r\n    {/*<!--　▲LINE風ここまで -->  */}\r\n\r\n    </>\r\n  )\r\n}\r\n","export function speak({sentence, voice, rate, volume}) {\r\n  const uttr = new SpeechSynthesisUtterance(sentence)\r\n  uttr.voice = voice\r\n  uttr.lang = voice.lang.replace('_', '-')// for Android\r\n  if(rate && (rate >= 0.1 && rate <= 10)) {\r\n    uttr.rate = rate\r\n  }\r\n  if(volume && (volume >= 0 && volume <= 1)) {\r\n    uttr.volume = volume\r\n  }\r\n  speechSynthesis.speak(uttr)\r\n}","import React, { useState, useEffect, useRef } from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport './App.css';\r\nimport SpeechDaemon from './SpeechDaemon';\r\nimport styles from './AppStyles';\r\nimport MicrophoneSwitch from './components/MicrophoneSwitch';\r\nimport { library } from '@fortawesome/fontawesome-svg-core'\r\nimport { faMicrophone, faPlayCircle, faStopCircle, faVolumeUp, faTimes, faTrash, faCircle as fasCircle,\r\n  faTrophy,\r\n  faArrowAltCircleRight,\r\n  faBars,\r\n  faHome,\r\n  faHistory,\r\n  faQuestionCircle,\r\n  faComments } from '@fortawesome/free-solid-svg-icons'\r\nimport { faCircle } from '@fortawesome/free-regular-svg-icons';\r\nimport { faWindows, faApple, faAndroid, faGithub } from '@fortawesome/free-brands-svg-icons';\r\nimport NativeSpeaker from './components/NativeSpeaker';\r\nimport { CorrectSign, IncorrectSign, TrophySign, ArrowAltCircleRightSign } from './components/app-icons';\r\nimport ButtonToConvertToTextFileThenDownload from './components/ButtonToConvertToTextFileThenDownload';\r\nimport { Typography , Grid, Tabs, Tab } from '@material-ui/core';\r\nimport InterimTranscript from './components/InterimTranscript';\r\nimport StackHistory from './components/StackHistory';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport FrequentlyAskedQuestions from './components/FrequentlyAskedQuestions';\r\nimport ToggleButton from './components/ToggleButton';\r\nimport TabPanels from './components/TabPanels'\r\nimport TabPanel from './components/TabPanel'\r\nimport ResponsiveDrawer from './components/ResponsiveDrawer';\r\nimport Chat from './components/line/Chat';\r\nimport {isAndroid, areEqual} from './helpers/validation';\r\n\r\nlibrary.add(faMicrophone, faPlayCircle, faStopCircle, faVolumeUp, faCircle, fasCircle, faTimes, faWindows, faApple, faAndroid, faGithub, faTrash, faTrophy, faArrowAltCircleRight,\r\n  faBars,\r\n  faHome,\r\n  faHistory,\r\n  faQuestionCircle,\r\n  faComments\r\n)\r\n\r\nconst useStyles = makeStyles({\r\n  item: {\r\n    textAlign: 'center',\r\n  },\r\n});\r\n\r\nvar langs =\r\n[['Afrikaans',       ['af-ZA']],\r\n ['አማርኛ',           ['am-ET']],\r\n ['Azərbaycanca',    ['az-AZ']],\r\n ['বাংলা',            ['bn-BD', 'বাংলাদেশ'],\r\n                     ['bn-IN', 'ভারত']],\r\n ['Bahasa Indonesia',['id-ID']],\r\n ['Bahasa Melayu',   ['ms-MY']],\r\n ['Català',          ['ca-ES']],\r\n ['Čeština',         ['cs-CZ']],\r\n ['Dansk',           ['da-DK']],\r\n ['Deutsch',         ['de-DE']],\r\n ['English',         ['en-AU', 'Australia'],\r\n                     ['en-CA', 'Canada'],\r\n                     ['en-IN', 'India'],\r\n                     ['en-KE', 'Kenya'],\r\n                     ['en-TZ', 'Tanzania'],\r\n                     ['en-GH', 'Ghana'],\r\n                     ['en-NZ', 'New Zealand'],\r\n                     ['en-NG', 'Nigeria'],\r\n                     ['en-ZA', 'South Africa'],\r\n                     ['en-PH', 'Philippines'],\r\n                     ['en-GB', 'United Kingdom'],\r\n                     ['en-US', 'United States']],\r\n ['Español',         ['es-AR', 'Argentina'],\r\n                     ['es-BO', 'Bolivia'],\r\n                     ['es-CL', 'Chile'],\r\n                     ['es-CO', 'Colombia'],\r\n                     ['es-CR', 'Costa Rica'],\r\n                     ['es-EC', 'Ecuador'],\r\n                     ['es-SV', 'El Salvador'],\r\n                     ['es-ES', 'España'],\r\n                     ['es-US', 'Estados Unidos'],\r\n                     ['es-GT', 'Guatemala'],\r\n                     ['es-HN', 'Honduras'],\r\n                     ['es-MX', 'México'],\r\n                     ['es-NI', 'Nicaragua'],\r\n                     ['es-PA', 'Panamá'],\r\n                     ['es-PY', 'Paraguay'],\r\n                     ['es-PE', 'Perú'],\r\n                     ['es-PR', 'Puerto Rico'],\r\n                     ['es-DO', 'República Dominicana'],\r\n                     ['es-UY', 'Uruguay'],\r\n                     ['es-VE', 'Venezuela']],\r\n ['Euskara',         ['eu-ES']],\r\n ['Filipino',        ['fil-PH']],\r\n ['Français',        ['fr-FR']],\r\n ['Basa Jawa',       ['jv-ID']],\r\n ['Galego',          ['gl-ES']],\r\n ['ગુજરાતી',           ['gu-IN']],\r\n ['Hrvatski',        ['hr-HR']],\r\n ['IsiZulu',         ['zu-ZA']],\r\n ['Íslenska',        ['is-IS']],\r\n ['Italiano',        ['it-IT', 'Italia'],\r\n                     ['it-CH', 'Svizzera']],\r\n ['ಕನ್ನಡ',             ['kn-IN']],\r\n ['ភាសាខ្មែរ',          ['km-KH']],\r\n ['Latviešu',        ['lv-LV']],\r\n ['Lietuvių',        ['lt-LT']],\r\n ['മലയാളം',          ['ml-IN']],\r\n ['मराठी',             ['mr-IN']],\r\n ['Magyar',          ['hu-HU']],\r\n ['ລາວ',              ['lo-LA']],\r\n ['Nederlands',      ['nl-NL']],\r\n ['नेपाली भाषा',        ['ne-NP']],\r\n ['Norsk bokmål',    ['nb-NO']],\r\n ['Polski',          ['pl-PL']],\r\n ['Português',       ['pt-BR', 'Brasil'],\r\n                     ['pt-PT', 'Portugal']],\r\n ['Română',          ['ro-RO']],\r\n ['සිංහල',          ['si-LK']],\r\n ['Slovenščina',     ['sl-SI']],\r\n ['Basa Sunda',      ['su-ID']],\r\n ['Slovenčina',      ['sk-SK']],\r\n ['Suomi',           ['fi-FI']],\r\n ['Svenska',         ['sv-SE']],\r\n ['Kiswahili',       ['sw-TZ', 'Tanzania'],\r\n                     ['sw-KE', 'Kenya']],\r\n ['ქართული',       ['ka-GE']],\r\n ['Հայերեն',          ['hy-AM']],\r\n ['தமிழ்',            ['ta-IN', 'இந்தியா'],\r\n                     ['ta-SG', 'சிங்கப்பூர்'],\r\n                     ['ta-LK', 'இலங்கை'],\r\n                     ['ta-MY', 'மலேசியா']],\r\n ['తెలుగు',           ['te-IN']],\r\n ['Tiếng Việt',      ['vi-VN']],\r\n ['Türkçe',          ['tr-TR']],\r\n ['اُردُو',            ['ur-PK', 'پاکستان'],\r\n                     ['ur-IN', 'بھارت']],\r\n ['Ελληνικά',         ['el-GR']],\r\n ['български',         ['bg-BG']],\r\n ['Pусский',          ['ru-RU']],\r\n ['Српски',           ['sr-RS']],\r\n ['Українська',        ['uk-UA']],\r\n ['한국어',            ['ko-KR']],\r\n ['中文',             ['cmn-Hans-CN', '普通话 (中国大陆)'],\r\n                     ['cmn-Hans-HK', '普通话 (香港)'],\r\n                     ['cmn-Hant-TW', '中文 (台灣)'],\r\n                     ['yue-Hant-HK', '粵語 (香港)']],\r\n ['日本語',           ['ja-JP']],\r\n ['हिन्दी',             ['hi-IN']],\r\n ['ภาษาไทย',         ['th-TH']]];\r\n\r\nconst famousQuotes = [\r\n  \"You're gonna need a bigger boat.\",\r\n  \"May the Force be with you.\",\r\n  \"With great power comes great responsibility.\",\r\n  \"I never had any friends later on like the ones I had when I was twelve.\",\r\n  \"Jesus, does anyone?\",\r\n  \"We think too much, and feel too little.\",\r\n  \"Mama always said life was like a box of chocolates.\",\r\n  \"You never know what you're gonna get.\",\r\n  \"This is Sparta!\",\r\n  \"I'll have what she's having.\",\r\n  \"War has already begun.\",\r\n  \"Elementary, my dear Watson.\",\r\n  \"I feel the need-the need for speed!\",\r\n  \"It was Beauty killed the Beast.\",\r\n  \"They're here\",\r\n  \"Magic Mirror on the wall, who is the fairest one of all?\",\r\n  \"Oh yes, the past can hurt.\",\r\n  \"But you can either run from it, or learn from it.\",\r\n  \"Then,you’re saying yes,not because you have to,not because a covenant tells you to,but because you know in your heart that you want to.\",\r\n  \"Truth is, sometimes I miss you so bad I can hardly stand it...\",\r\n  \"I mean, funny like I'm a clown? I amuse you?\",\r\n  \"After all, tomorrow is another day!\",\r\n  \"Why are you trying so hard to fit in when you were born to stand out?\",\r\n  \"I'm the king of the world!\",\r\n  \"Show me the money!\",\r\n  \"Hey. Don't ever let somebody tell you... You can't do something. Not even me. All right?\",\r\n  \"You got a dream... You gotta protect it.\",\r\n  \"People can't do somethin' themselves, they wanna tell you you can't do it.\",\r\n  \"If you want somethin', go get it. Period.\",\r\n  \"To infinity and beyond!\",\r\n  \"I need your help\",\r\n  \"You talkin' to me?\",\r\n  \"Son, you’re gonna have to face him sooner or later.\",\r\n  \"If you’re afraid of something, you've got to stand and face it.\",\r\n  \"You have all these rules, and you think they’ll save you.\",\r\n  \"Usually they’re just trying to protect you because they love you.\"\r\n]\r\n\r\nif(!Array.prototype.skip) {\r\n  Array.prototype.skip = function(n) {\r\n    if(n < 1) return this\r\n    return this.filter((v, i) => i > (n - 1))\r\n  }  \r\n}\r\n\r\nconst getVoices = (arg) => {\r\n  return window.speechSynthesis.getVoices().filter(arg || (voice => voice))\r\n}\r\nconst getVoiceByName = (name) => {\r\n  return getVoices(voice => voice.name === name)[0]\r\n}\r\nconst indexOfLangsByLocale = (locale) => {\r\n  return langs.reduce((ax, lang, i) => {\r\n    const exists = lang.skip(1).reduce((xs, x) => {\r\n      xs.push(x[0]);\r\n      return xs;\r\n    }, []).includes(locale)\r\n\r\n    \r\n    if(exists) {\r\n      ax = i\r\n      console.log(`exists ${i}`)\r\n    }\r\n    return ax\r\n  }, null)\r\n}\r\n\r\nconst saveHistories = x => window.localStorage.setItem('histories', JSON.stringify(x))\r\n\r\nfunction App() {\r\n  const speechLog = useRef([]);\r\n  const speech = useRef();\r\n  const [selectedIndex, setSelectedIndex] = useState(null);\r\n  const [dialect, setDialect] = useState();\r\n  const [finalTranscript, setFinalTranscript] = useState('');\r\n  const [interimTranscript, setInterimTranscript] = useState('');\r\n  const [isPowerOn, setIsPowerOn] = useState(false);\r\n  const [voices, setVoices] = useState([]);\r\n  const [selectedVoice, setSelectedVoice] = useState(null);\r\n  const [sentence, setSentence] = useState(\"I'm going to make him an offer he can't refuse.\");\r\n  const [rate, setRate] = useState(1);\r\n  const [volume, setVolume] = useState(1);\r\n  const [histories, setHistories] = useState([]);\r\n  const [currentTab, setCurrentTab] = React.useState(0);\r\n  const classes = useStyles();\r\n  const [isTrialRun, setIsTrialRun] = useState(false);\r\n  const [famousQuote, setFamousQuote] = useState(famousQuotes);\r\n  const inputSentence = useRef();\r\n\r\n  const setDefautVoice = () => {\r\n    // 日本語と英語以外の声は選択肢に追加しない。\r\n    const voices = getVoices(voice => voice.lang.match('ja|en[-_]US')).reverse()\r\n    const defautVoice = voices.filter(voice => voice.lang.match('en[-_]US') /*&& /^google/i.test(voice.name)*/)[0]\r\n    defautVoice && setSelectedVoice(defautVoice)\r\n    setVoices(voices)\r\n  }\r\n  const initialize = _ => {\r\n    console.log('初期化処理')\r\n    speech.current = new SpeechDaemon()\r\n    speech.current.on('result', (event) => {\r\n      let transcript = ''\r\n      let buf = ''\r\n      for (let i = event.resultIndex; i < event.results.length; i++) {\r\n        transcript = event.results[i][0].transcript;\r\n        if (event.results[i].isFinal && (!isAndroid() || event.results[i][0].confidence > 0)) {\r\n          if (speech.current.lang === 'ja-JP') {\r\n            transcript += '。';\r\n          }\r\n          // judgment\r\n          if(!inputSentence.current) return\r\n          speechLog.current.push({\r\n            transcript,\r\n            isCorrect: areEqual(transcript, inputSentence.current.value),\r\n            sentence: inputSentence.current.value\r\n          })\r\n          console.log(`${transcript} : ${inputSentence.current.value}`)\r\n          setFinalTranscript(speechLog.current.filter(x => x.transcript.length > 0).map(x => x.transcript).join('\\n'))\r\n        } else {\r\n          buf += transcript\r\n        }\r\n        setInterimTranscript(buf)\r\n      }\r\n    })\r\n    .on('start', () => {\r\n      console.log(\"話しかけてみて\")\r\n    }).on('soundstart', () => {\r\n      console.log(\"認識中...\")\r\n    }).on('soundend', () => {\r\n      console.log(\"停止中\")\r\n    }).on('nomatch', (event) => {\r\n      console.log('音声を認識できませんでした')\r\n    }).on('error', (event) => {\r\n      console.log('エラー: ' + event.error)\r\n    })\r\n\r\n    window.speechSynthesis.onvoiceschanged = _ => {\r\n      console.log('onvoiceschanged')\r\n      setDefautVoice()\r\n    }\r\n    setDefautVoice()\r\n\r\n    const histories = JSON.parse(localStorage.getItem(\"histories\"))\r\n    if(!histories) return\r\n    /* 昔のフォーマットを新フォーマットへ変換 */\r\n    setHistories(histories.map(x => {\r\n      if(typeof x === 'string') {\r\n        return { sentence: x }\r\n      }\r\n      return x\r\n    }))\r\n  }\r\n\r\n  useEffect(initialize, [])\r\n\r\n  useEffect(_ => {\r\n    console.log('changed selectedVoice')\r\n    if(!selectedVoice) return\r\n\r\n    const i = indexOfLangsByLocale(selectedVoice.lang.replace('_', '-'))\r\n    setSelectedIndex(i)\r\n\r\n    setDialect(langs[i].filter((a, j) => j > 0).reduce((xs, x) => {\r\n      if(x[0] === selectedVoice.lang.replace('_', '-')) xs = x\r\n      return xs\r\n    })[0])\r\n  }, [selectedVoice])\r\n\r\n  if(!selectedVoice || !selectedIndex) {\r\n    console.log('音声取得中')\r\n    return (<>音声取得中</>)\r\n  }\r\n\r\n  const hasDialect = langs[selectedIndex][1].length > 1\r\n\r\n  if(isPowerOn) {\r\n    console.log('Microphone On')\r\n    speech.current.lang = dialect\r\n    speech.current.listen()\r\n  } else {\r\n    console.log('onMicrophone Off')\r\n    speech.current.kill()\r\n  }\r\n\r\n  const latelyTranscript = (n) => {\r\n    return (<>\r\n    {\r\n      speechLog.current\r\n      .filter(x => x.transcript.length > 0)\r\n      .slice(-1 * n)\r\n      .map((x, i) => {\r\n        return (\r\n        <Grid key={i} container spacing={3}>\r\n          <Grid item xs={1} classes={{ item: classes.item }}>\r\n            {x.isCorrect ? <CorrectSign /> : <IncorrectSign />}\r\n          </Grid>\r\n          <Grid item xs={11}>\r\n            {x.transcript}\r\n          </Grid>\r\n        </Grid>)\r\n      })\r\n    }\r\n    </>)\r\n  }\r\n\r\n  const handleChangedSentence = e => setSentence(e.target.value)\r\n\r\n  return (\r\n    <Router>\r\n      <div className=\"app\">\r\n        <ResponsiveDrawer>\r\n          <Switch>\r\n            <Route exact path=\"/shadowing/\">\r\n              <Typography>ドラマ・映画の名言をシャドーイング</Typography>\r\n              <Tabs\r\n                value={currentTab}\r\n                onChange={(event, newValue) => {\r\n                  setCurrentTab(newValue);\r\n                }}\r\n                indicatorColor=\"primary\"\r\n                textColor=\"primary\"\r\n                centered\r\n              >\r\n                <Tab label=\"ホーム\" />\r\n                <Tab label=\"過去の台詞\" />\r\n              </Tabs>\r\n\r\n              <TabPanels value={currentTab}>\r\n                <TabPanel>\r\n                  <div className=\"recognition\">\r\n                    <div id=\"results\">\r\n                      <span className=\"final\" id=\"final_span\">{latelyTranscript(5)}</span>\r\n                      <InterimTranscript>{interimTranscript}</InterimTranscript>\r\n                    </div>\r\n                    <div className=\"tools\">\r\n                      <Grid container direction=\"column\" justify=\"space-around\" alignItems=\"center\">\r\n                        <Grid item>\r\n                          <div style={{display: 'none'}}>\r\n                            <select disabled={true} value={selectedIndex}>\r\n                            {\r\n                              langs.map((x, i) => <option key={x[0]} value={i}>{x[0]}</option>)\r\n                            }\r\n                            </select>&nbsp;&nbsp; \r\n                            <select disabled={true} value={dialect} style={{visibility: hasDialect ? 'visible' : 'hidden'}}>\r\n                            {\r\n                              langs[selectedIndex]\r\n                                .filter((x, i) => i > 0)\r\n                                .map((x ,i) => <option key={i} value={x[0]}>{x[1]||''}</option>)\r\n                            }\r\n                            </select>\r\n                          </div>\r\n                        </Grid>\r\n                      \r\n                        <Grid item>\r\n                          <ButtonToConvertToTextFileThenDownload text={finalTranscript}>\r\n                            ログをダウンロード\r\n                          </ButtonToConvertToTextFileThenDownload>\r\n                        </Grid>\r\n                        <Grid item>\r\n                          <div style={{padding: \"10px\"}}>\r\n                          <MicrophoneSwitch isPowerOn={isPowerOn}\r\n                                          onClick={() => {setIsPowerOn(!isPowerOn)}} />\r\n                          </div>\r\n                        </Grid>          \r\n                      </Grid>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"training-mode\">\r\n                    <ToggleButton checked={isTrialRun} onChange={e => setIsTrialRun(!isTrialRun)}>\r\n                      <TrophySign/>\r\n                    </ToggleButton>\r\n\r\n                    {isTrialRun && (\r\n                    <div className=\"button\" onClick={e => {\r\n                      const xs = famousQuote.concat()\r\n                      if(xs.length === 0) {\r\n                        setFamousQuote(famousQuotes)\r\n                        setIsTrialRun(false)\r\n                        alert(\"おしまい\")\r\n                        return\r\n                      }\r\n                      var random = Math.floor( Math.random() * xs.length );\r\n                      console.log(`${random}/${xs.length}`)\r\n                      setSentence(xs[random])\r\n                      xs.splice(random, 1)\r\n                      setFamousQuote(xs)\r\n                    }}>\r\n                      <ArrowAltCircleRightSign size=\"3x\" color=\"#1976d2\"/>\r\n                    </div>\r\n                    )}\r\n                  </div>          \r\n\r\n                  <NativeSpeaker sentence={sentence} ref={inputSentence}\r\n                    selectedVoice={selectedVoice}\r\n                    voices={voices}\r\n                    onChangedSentence={handleChangedSentence}\r\n                    onChangeVoice={e => {\r\n                      const voice = getVoiceByName(e.target.value)\r\n                      setSelectedVoice(voice)\r\n                      speech.current.lang = voice.lang\r\n                      speech.current.restart()\r\n                    }}\r\n                    onSpeak={_ => {\r\n                      let sentences = [{sentence}, ...histories.filter(x => x.sentence !== sentence)]\r\n                      setHistories(sentences)\r\n                      saveHistories(sentences)\r\n                    }}\r\n                    rate={rate} onChangedRate={(e, newValue) => setRate(newValue)}\r\n                    volume={volume} onChangedVolume={(e, newValue) => setVolume(newValue)} />\r\n                </TabPanel>\r\n\r\n                <TabPanel>\r\n                  <StackHistory histories={histories}\r\n                    toggleItemRemove={({checked, index}) => {\r\n                      const items = histories.concat();\r\n                      items[index].willRemove = checked\r\n                      setHistories(items)\r\n                    }}\r\n                    onRemove={_ => {\r\n                      const items = histories.filter(x => !x.willRemove).concat();\r\n                      setHistories(items)\r\n                      saveHistories(items)\r\n                    }} \r\n                    onChange={handleChangedSentence} />\r\n                </TabPanel>\r\n              </TabPanels>\r\n            </Route>\r\n            <Route exact path=\"/shadowing/chat\">\r\n              <Chat voice={selectedVoice} rate={rate} volume={volume}\r\n                speechDaemonInstance={speech.current} />\r\n            </Route>\r\n            <Route exact path=\"/shadowing/faq\" component={FrequentlyAskedQuestions}/>\r\n            <Route exact path=\"/shadowing/version\">バージョン 1.0</Route>\r\n            <Route><h2>ページが見つかりません</h2></Route>\r\n          </Switch>\r\n        </ResponsiveDrawer>\r\n        <style jsx>{styles}</style>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/8.51416bf2.png\";","module.exports = __webpack_public_path__ + \"static/media/27.d3faf74e.png\";","module.exports = __webpack_public_path__ + \"static/media/icon.f2aa0410.png\";","module.exports = __webpack_public_path__ + \"static/media/13.9eea827b.png\";","module.exports = __webpack_public_path__ + \"static/media/22.74d90bef.png\";"],"sourceRoot":""}