{"version":3,"sources":["SpeechDaemon.js","AppStyles.js","components/MicrophoneSwitchStyles.js","components/app-icons.js","components/MicrophoneSwitch.js","components/NativeSpeaker.js","components/ButtonToConvertToTextFileThenDownload.js","components/InterimTranscript.js","components/StackHistory.js","App.js","serviceWorker.js","index.js"],"names":["SpeechDaemon","options","recognition","window","webkitSpeechRecognition","SpeechRecognition","interimResults","continuous","onresult","event","emit","onsoundstart","console","log","Date","onsoundend","onnomatch","onerror","onstart","timeStamp","onend","_","hasAlreadyStarted","isIdle","listen","this","lang_","v","replace","lang","start","stop","EventEmitter","styles","CorrectSign","props","icon","size","color","IncorrectSign","MicrophoneSign","VolumeUpSign","WindowsSign","AppleSign","AndroidSign","GithubSign","MicrophoneSwitch","isPowerOn","onClick","background","id","apply","useStyles","makeStyles","root","height","width","borderRadius","backgroundColor","border","cursor","NativeSpeaker","classes","onChangedSentence","onChangeVoice","onSpeak","sentence","selectedVoice","voices","rate","onChangedRate","volume","onChangedVolume","FormControl","required","fullWidth","variant","InputLabel","htmlFor","OutlinedInput","type","labelWidth","value","onChange","endAdornment","InputAdornment","position","IconButton","focusVisibleClassName","uttr","SpeechSynthesisUtterance","voice","speechSynthesis","speak","Grid","container","spacing","alignItems","item","Typography","gutterBottom","xs","Slider","min","max","step","valueLabelDisplay","aria-labelledby","shrink","Select","labelId","name","displayEmpty","map","i","MenuItem","key","ButtonToConvertToTextFileThenDownload","children","text","a","document","createElement","href","encodeURIComponent","download","moment","format","click","InterimTranscript","StackHistory","title","histories","useState","selectedIndex","setSelectedIndex","Row","index","style","data","ListItem","button","selected","target","ListItemText","primary","itemCount","length","itemSize","itemData","defaultProps","library","add","faMicrophone","faPlayCircle","faStopCircle","faVolumeUp","faCircle","faTimes","faWindows","faApple","faAndroid","faGithub","langs","Array","prototype","skip","n","filter","getVoices","arg","App","speechLog","useRef","speech","dialect","setDialect","finalTranscript","setFinalTranscript","interimTranscript","setInterimTranscript","setIsPowerOn","setVoices","setSelectedVoice","setSentence","setRate","setVolume","setHistories","React","currentTab","setCurrentTab","setDefautVoice","match","reverse","defautVoice","useEffect","current","on","transcript","buf","resultIndex","results","isFinal","test","navigator","userAgent","confidence","error","onvoiceschanged","JSON","parse","localStorage","getItem","locale","reduce","ax","x","push","includes","j","hasDialect","kill","handleChangedSentence","e","judgment","phrases","split","pattern","RegExp","pop","toLowerCase","Tabs","newValue","indicatorColor","textColor","centered","Tab","label","slice","direction","justify","display","disabled","visibility","padding","restart","sentences","setItem","stringify","colSpan","Boolean","location","hostname","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.c695fbb9.chunk.js","sourcesContent":["import {EventEmitter} from 'events';\r\n\r\nexport default class SpeechDaemon extends EventEmitter {\r\n  get lang() { return this.lang_ }\r\n  set lang(v) { this.lang_ = v.replace('_', '-') }// for Android\r\n\r\n  constructor(options) {\r\n    super()\r\n    const SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition;\r\n    const recognition = new SpeechRecognition();\r\n    recognition.interimResults = true;\r\n    recognition.continuous = true;\r\n\r\n    recognition.onresult = (event)=>{\r\n      this.emit(\"result\", event);\r\n    };\r\n    recognition.onsoundstart = (event) => {\r\n      console.log(`${new Date()}認識中...`)\r\n      this.emit(\"soundstart\", null);\r\n    };\r\n    recognition.onsoundend = () => { this.emit(\"soundend\", null) };\r\n    recognition.onnomatch = () => {\r\n      console.log(`${new Date()} 音声を認識できませんでした`)\r\n      this.emit('nomatch', null)\r\n    };\r\n    recognition.onerror = (event) => {\r\n      console.log(event)\r\n      this.emit('error', event)\r\n    };\r\n    recognition.onstart = (event) => {\r\n      console.log(`${new Date()} ${(event.timeStamp)} 音声認識サービス開始 ->>>>>`)\r\n      this.emit('start', null)\r\n    };\r\n    recognition.onend = _ => {\r\n      console.log(`${new Date()} <<<<<- 音声認識サービス切断`)\r\n      this.hasAlreadyStarted = false\r\n      this.emit('end', null)\r\n      if(this.isIdle) return;\r\n      this.listen()\r\n    };\r\n    this.recognition = recognition\r\n    this.isIdle = false\r\n    this.hasAlreadyStarted = false\r\n  }\r\n\r\n  listen() {\r\n    if(this.hasAlreadyStarted) {\r\n      return\r\n    }\r\n    this.hasAlreadyStarted = true\r\n    this.isIdle = false\r\n    if(this.lang) {\r\n      this.recognition.lang = this.lang\r\n    }\r\n    this.recognition.start();\r\n  }\r\n\r\n  kill() {\r\n    this.isIdle = true\r\n    this.recognition.stop();\r\n  }\r\n\r\n  restart() {\r\n    this.isIdle = false\r\n    this.recognition.stop();\r\n  }\r\n}","import css from 'styled-jsx/css'\r\nconst styles = css`\r\n.app {\r\n  text-align: center;\r\n}\r\n\r\n#results {\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  border: 1px solid #ddd;\r\n  padding: 15px;\r\n  text-align: left;\r\n  min-height: 100px;\r\n}\r\n\r\n.recognition {position: relative;}\r\n\r\n.tools {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n}\r\n\r\n.qa {margin: 10px auto;}\r\n.text-left {text-align: left;}\r\n.footer a {\r\n  cursor: pointer;\r\n  color: black;\r\n  text-decoration: none;\r\n}\r\n`\r\n\r\nexport default styles","import css from 'styled-jsx/css'\r\n\r\nconst styles = css`\r\n.microphone-switch {\r\n  position: relative;\r\n}\r\n\r\n@keyframes shiny {\r\n  0% {\r\n    transform: scale(0) rotate(25deg);\r\n    opacity: 0;\r\n  }\r\n  50% {\r\n    transform: scale(1) rotate(25deg);\r\n    opacity: 1;\r\n  }\r\n  100% {\r\n    transform: scale(50) rotate(25deg);\r\n    opacity: 0;\r\n  }\r\n}\r\n\r\n.shiny-btn {\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.shiny-btn::after {\r\n  content: '';\r\n  position: absolute;\r\n  top: -100px;\r\n  left: -100px;\r\n  width: 50px;\r\n  height: 50px;\r\n  background-image: linear-gradient(100deg, rgba(255, 255, 255, 0) 10%, rgba(255, 255, 255, 1) 100%, rgba(255, 255, 255, 0) 0%);\r\n  animation-name: shiny;\r\n  animation-duration: 2s;\r\n  animation-timing-function: ease-in-out;\r\n  animation-iteration-count: infinite;\r\n}\r\n\r\n.circle {\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  text-align: center;\r\n}\r\n\r\n.microphone-on,\r\n.microphone-off {\r\n  cursor: pointer;\r\n}\r\n\r\n.microphone-on {\r\n  background: #1373C7;\r\n  width: 48px;\r\n  height: 48px;\r\n  color: #FFF;\r\n}\r\n\r\n.microphone-off {\r\n  background: #FFF;\r\n  width: 38px;\r\n  height: 38px;\r\n  border: solid 5px #ED1C22;\r\n  color: #1373C7;\r\n}\r\n\r\n.heartbeat {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  animation: pounding .1s linear infinite alternate;\r\n  opacity: 0.2;\r\n  z-index: -99;\r\n  background: #1373C7;\r\n  width: 48px;\r\n  height: 48px;\r\n}\r\n\r\n@keyframes pounding {\r\n  0% {\r\n    transform: scale(1.3);\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n  }\r\n}\r\n`\r\n\r\nexport default styles","import React from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\n\r\nexport function CorrectSign(props) {\r\n  return <FontAwesomeIcon icon={['far', 'circle']} size=\"2x\" color=\"green\" />\r\n}\r\n\r\nexport function IncorrectSign(props) {\r\n  return <FontAwesomeIcon icon=\"times\" size=\"2x\" color=\"red\" />\r\n}\r\n\r\nexport function MicrophoneSign(props) {\r\n  return <FontAwesomeIcon icon=\"microphone\" size=\"2x\" />\r\n}\r\n\r\nexport function VolumeUpSign(props) {\r\n  return <FontAwesomeIcon icon=\"volume-up\" size=\"1x\" />\r\n}\r\n\r\nexport function WindowsSign(props) {\r\n  return <FontAwesomeIcon icon={['fab', 'windows']} size=\"2x\" />\r\n}\r\n\r\nexport function AppleSign(props) {\r\n  return <FontAwesomeIcon icon={['fab', 'apple']} size=\"2x\" />\r\n}\r\n\r\nexport function AndroidSign(props) {\r\n  return <FontAwesomeIcon icon={['fab', 'android']} size=\"2x\" />\r\n}\r\n\r\nexport function GithubSign(props) {\r\n  return <FontAwesomeIcon icon={['fab', 'github']} size=\"2x\" />\r\n}","import React from 'react';\r\nimport styles from './MicrophoneSwitchStyles';\r\nimport { MicrophoneSign } from './app-icons';\r\n\r\nfunction MicrophoneSwitch(props) {\r\n  const { isPowerOn, onClick } = props\r\n  const background = props.background || '#1373C7'\r\n  const handleClick = _ => {\r\n    onClick && onClick.apply()\r\n  }\r\n\r\n  return (\r\n  <div className=\"microphone-switch\">\r\n    <div id=\"microphone\"\r\n         onClick={handleClick}\r\n         className={`circle microphone-${isPowerOn ? 'on shiny-btn' : 'off'}`}>\r\n      <div><MicrophoneSign /></div>\r\n    </div>\r\n    <div id=\"heartbeat\" className={`circle ${isPowerOn ? 'heartbeat' : ''}`}></div>\r\n\r\n    <style jsx>{styles}</style>\r\n  </div>)\r\n}\r\n\r\nexport default MicrophoneSwitch;","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { VolumeUpSign } from './app-icons';\r\nimport {Grid, Slider, Typography, FormControl, Select, InputLabel, MenuItem,\r\n   OutlinedInput, InputAdornment, IconButton } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    height: \"48px\",\r\n    width: \"48px\",\r\n    borderRadius: \"50%\",\r\n    color: \"#fff\",\r\n    backgroundColor: \"#1976d2\",\r\n    border: 0,\r\n    cursor: \"pointer\",\r\n    \"&:hover\": {\r\n      color: \"#fff\",\r\n      backgroundColor: \"#1976d2\",\r\n    }\r\n  },\r\n});\r\n\r\nfunction NativeSpeaker(props) {\r\n  const classes = useStyles();\r\n  const {\r\n    onChangedSentence, onChangeVoice, onSpeak,\r\n    sentence, selectedVoice, voices,\r\n    rate, onChangedRate,\r\n    volume, onChangedVolume\r\n  } = props\r\n\r\n  const handleSpeak = _ => {\r\n    onSpeak && onSpeak(sentence)\r\n    const uttr = new SpeechSynthesisUtterance(sentence)\r\n    uttr.voice = selectedVoice\r\n    uttr.lang = selectedVoice.lang.replace('_', '-')// for Android\r\n    if(rate && (rate >= 0.1 && rate <= 10)) {\r\n      uttr.rate = rate\r\n    }\r\n    if(volume && (volume >= 0 && volume <= 1)) {\r\n      uttr.volume = volume\r\n    }\r\n    speechSynthesis.speak(uttr)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <FormControl required fullWidth variant=\"outlined\">\r\n        <InputLabel htmlFor=\"outlined-adornment-sentence\">台詞</InputLabel>\r\n        <OutlinedInput\r\n          id=\"outlined-adornment-sentence\"\r\n          type='text'\r\n          labelWidth={50}\r\n          value={sentence}\r\n          onChange={onChangedSentence}\r\n          endAdornment={\r\n            <InputAdornment position=\"end\">\r\n              <IconButton focusVisibleClassName={\"a\"} classes={{root: classes.root}} onClick={handleSpeak} size=\"small\"><VolumeUpSign /></IconButton>\r\n            </InputAdornment>\r\n          }\r\n          \r\n        />\r\n      </FormControl>\r\n      {/*\r\n      <button onClick={_ => speechSynthesis.pause()}>一時停止</button>\r\n      <button onClick={_ => speechSynthesis.resume()}>再開</button>\r\n      */}\r\n\r\n      <Grid container spacing={2} alignItems=\"center\">\r\n        <Grid item>\r\n          <Typography id=\"input-slider\" gutterBottom>速度</Typography>\r\n        </Grid>\r\n        <Grid item xs>\r\n          <Slider min={0.1} max={10.0} step={0.1} value={rate}\r\n                  onChange={onChangedRate}\r\n                  valueLabelDisplay=\"auto\"\r\n                  aria-labelledby=\"input-slider\" />\r\n        </Grid>\r\n        <Grid item><Typography>{rate}</Typography></Grid>\r\n      </Grid>\r\n\r\n      <Grid container spacing={2} alignItems=\"center\">\r\n        <Grid item>\r\n          <Typography id=\"volume-slider\" gutterBottom>音量</Typography>\r\n        </Grid>\r\n        <Grid item xs>\r\n          <Slider min={0} max={1} step={0.1} value={volume}\r\n                  onChange={onChangedVolume}\r\n                  valueLabelDisplay=\"auto\"\r\n                  aria-labelledby=\"volume-slider\" />\r\n        </Grid>\r\n        <Grid item><Typography>{volume}</Typography></Grid>\r\n      </Grid>\r\n\r\n      <FormControl>\r\n        <InputLabel shrink id=\"selectVoicesLabel\">\r\n          言語\r\n        </InputLabel>\r\n        <Select\r\n          labelId=\"selectVoicesLabel\"\r\n          value={selectedVoice.name}\r\n          onChange={onChangeVoice}\r\n          displayEmpty\r\n        >\r\n        {\r\n          voices\r\n          .map((voice, i) => {\r\n            return (<MenuItem key={i} value={voice.name}>{`${voice.name} (${voice.lang})`}</MenuItem>)\r\n          })            \r\n        }\r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NativeSpeaker;","import React from 'react';\r\nimport moment from 'moment';\r\n\r\nexport default function ButtonToConvertToTextFileThenDownload(props) {\r\n  const {children, text} = props\r\n  const downloadTextFile = () => {\r\n    const a = document.createElement('a');\r\n    a.href = 'data:text/plain,' + encodeURIComponent(text);\r\n    a.download = `log${moment().format('_YYYYMMDD_HHmmss')}.txt`;\r\n    a.click();\r\n  }\r\n\r\n   return (<button onClick={downloadTextFile}>{children}</button>)\r\n}","import React from 'react';\r\n\r\nexport default function InterimTranscript(props) {\r\n  return (\r\n  <>\r\n    <span>{props.children}</span>\r\n    <style jsx>{`\r\n    span {color: gray;}\r\n    `}</style>\r\n  </>)\r\n}","import React, { useState } from 'react';\r\nimport { ListItem, ListItemText } from '@material-ui/core';\r\nimport { FixedSizeList } from 'react-window';\r\n\r\n\r\nexport default function StackHistory(props) {\r\n  const { title, histories, onChange, size } = props\r\n\r\n  const [selectedIndex, setSelectedIndex] = useState(null)\r\n  const Row = ({ index, style, data }) => (\r\n    <ListItem button style={style} key={index} selected={selectedIndex === index} onClick={_ => {\r\n      setSelectedIndex(index)\r\n      data[index] && onChange && onChange({target:{value: data[index]}})\r\n    }}>\r\n        <ListItemText primary={data[index]} />\r\n    </ListItem>\r\n  );\r\n  \r\n  return (\r\n    <div>\r\n      <p>{title}</p>\r\n      <FixedSizeList\r\n        height={245}\r\n        itemCount={histories.length}\r\n        itemSize={size}\r\n        width={\"100%\"}\r\n        itemData={histories}\r\n      >\r\n        {Row}\r\n      </FixedSizeList>\r\n    </div>\r\n  )\r\n}\r\n\r\nStackHistory.defaultProps = {\r\n  title: '履歴',\r\n  size: 35,\r\n};","import React, { useState, useEffect, useRef } from 'react';\r\nimport './App.css';\r\nimport SpeechDaemon from './SpeechDaemon';\r\nimport styles from './AppStyles';\r\nimport MicrophoneSwitch from './components/MicrophoneSwitch';\r\nimport { library } from '@fortawesome/fontawesome-svg-core'\r\nimport { faMicrophone, faPlayCircle, faStopCircle, faVolumeUp, faTimes } from '@fortawesome/free-solid-svg-icons'\r\nimport { faCircle } from '@fortawesome/free-regular-svg-icons';\r\nimport { faWindows, faApple, faAndroid, faGithub } from '@fortawesome/free-brands-svg-icons';\r\nimport NativeSpeaker from './components/NativeSpeaker';\r\nimport { CorrectSign, IncorrectSign, WindowsSign, AppleSign, AndroidSign, GithubSign } from './components/app-icons';\r\nimport ButtonToConvertToTextFileThenDownload from './components/ButtonToConvertToTextFileThenDownload';\r\nimport { Typography , Grid, Tabs, Tab } from '@material-ui/core';\r\nimport InterimTranscript from './components/InterimTranscript';\r\nimport StackHistory from './components/StackHistory';\r\n\r\nlibrary.add(faMicrophone, faPlayCircle, faStopCircle, faVolumeUp, faCircle, faTimes, faWindows, faApple, faAndroid, faGithub)\r\n\r\nvar langs =\r\n[['Afrikaans',       ['af-ZA']],\r\n ['አማርኛ',           ['am-ET']],\r\n ['Azərbaycanca',    ['az-AZ']],\r\n ['বাংলা',            ['bn-BD', 'বাংলাদেশ'],\r\n                     ['bn-IN', 'ভারত']],\r\n ['Bahasa Indonesia',['id-ID']],\r\n ['Bahasa Melayu',   ['ms-MY']],\r\n ['Català',          ['ca-ES']],\r\n ['Čeština',         ['cs-CZ']],\r\n ['Dansk',           ['da-DK']],\r\n ['Deutsch',         ['de-DE']],\r\n ['English',         ['en-AU', 'Australia'],\r\n                     ['en-CA', 'Canada'],\r\n                     ['en-IN', 'India'],\r\n                     ['en-KE', 'Kenya'],\r\n                     ['en-TZ', 'Tanzania'],\r\n                     ['en-GH', 'Ghana'],\r\n                     ['en-NZ', 'New Zealand'],\r\n                     ['en-NG', 'Nigeria'],\r\n                     ['en-ZA', 'South Africa'],\r\n                     ['en-PH', 'Philippines'],\r\n                     ['en-GB', 'United Kingdom'],\r\n                     ['en-US', 'United States']],\r\n ['Español',         ['es-AR', 'Argentina'],\r\n                     ['es-BO', 'Bolivia'],\r\n                     ['es-CL', 'Chile'],\r\n                     ['es-CO', 'Colombia'],\r\n                     ['es-CR', 'Costa Rica'],\r\n                     ['es-EC', 'Ecuador'],\r\n                     ['es-SV', 'El Salvador'],\r\n                     ['es-ES', 'España'],\r\n                     ['es-US', 'Estados Unidos'],\r\n                     ['es-GT', 'Guatemala'],\r\n                     ['es-HN', 'Honduras'],\r\n                     ['es-MX', 'México'],\r\n                     ['es-NI', 'Nicaragua'],\r\n                     ['es-PA', 'Panamá'],\r\n                     ['es-PY', 'Paraguay'],\r\n                     ['es-PE', 'Perú'],\r\n                     ['es-PR', 'Puerto Rico'],\r\n                     ['es-DO', 'República Dominicana'],\r\n                     ['es-UY', 'Uruguay'],\r\n                     ['es-VE', 'Venezuela']],\r\n ['Euskara',         ['eu-ES']],\r\n ['Filipino',        ['fil-PH']],\r\n ['Français',        ['fr-FR']],\r\n ['Basa Jawa',       ['jv-ID']],\r\n ['Galego',          ['gl-ES']],\r\n ['ગુજરાતી',           ['gu-IN']],\r\n ['Hrvatski',        ['hr-HR']],\r\n ['IsiZulu',         ['zu-ZA']],\r\n ['Íslenska',        ['is-IS']],\r\n ['Italiano',        ['it-IT', 'Italia'],\r\n                     ['it-CH', 'Svizzera']],\r\n ['ಕನ್ನಡ',             ['kn-IN']],\r\n ['ភាសាខ្មែរ',          ['km-KH']],\r\n ['Latviešu',        ['lv-LV']],\r\n ['Lietuvių',        ['lt-LT']],\r\n ['മലയാളം',          ['ml-IN']],\r\n ['मराठी',             ['mr-IN']],\r\n ['Magyar',          ['hu-HU']],\r\n ['ລາວ',              ['lo-LA']],\r\n ['Nederlands',      ['nl-NL']],\r\n ['नेपाली भाषा',        ['ne-NP']],\r\n ['Norsk bokmål',    ['nb-NO']],\r\n ['Polski',          ['pl-PL']],\r\n ['Português',       ['pt-BR', 'Brasil'],\r\n                     ['pt-PT', 'Portugal']],\r\n ['Română',          ['ro-RO']],\r\n ['සිංහල',          ['si-LK']],\r\n ['Slovenščina',     ['sl-SI']],\r\n ['Basa Sunda',      ['su-ID']],\r\n ['Slovenčina',      ['sk-SK']],\r\n ['Suomi',           ['fi-FI']],\r\n ['Svenska',         ['sv-SE']],\r\n ['Kiswahili',       ['sw-TZ', 'Tanzania'],\r\n                     ['sw-KE', 'Kenya']],\r\n ['ქართული',       ['ka-GE']],\r\n ['Հայերեն',          ['hy-AM']],\r\n ['தமிழ்',            ['ta-IN', 'இந்தியா'],\r\n                     ['ta-SG', 'சிங்கப்பூர்'],\r\n                     ['ta-LK', 'இலங்கை'],\r\n                     ['ta-MY', 'மலேசியா']],\r\n ['తెలుగు',           ['te-IN']],\r\n ['Tiếng Việt',      ['vi-VN']],\r\n ['Türkçe',          ['tr-TR']],\r\n ['اُردُو',            ['ur-PK', 'پاکستان'],\r\n                     ['ur-IN', 'بھارت']],\r\n ['Ελληνικά',         ['el-GR']],\r\n ['български',         ['bg-BG']],\r\n ['Pусский',          ['ru-RU']],\r\n ['Српски',           ['sr-RS']],\r\n ['Українська',        ['uk-UA']],\r\n ['한국어',            ['ko-KR']],\r\n ['中文',             ['cmn-Hans-CN', '普通话 (中国大陆)'],\r\n                     ['cmn-Hans-HK', '普通话 (香港)'],\r\n                     ['cmn-Hant-TW', '中文 (台灣)'],\r\n                     ['yue-Hant-HK', '粵語 (香港)']],\r\n ['日本語',           ['ja-JP']],\r\n ['हिन्दी',             ['hi-IN']],\r\n ['ภาษาไทย',         ['th-TH']]];\r\n\r\nif(!Array.prototype.skip) {\r\n  Array.prototype.skip = function(n) {\r\n    if(n < 1) return this\r\n    return this.filter((v, i) => i > (n - 1))\r\n  }  \r\n}\r\n\r\nconst getVoices = (arg) => {\r\n  return window.speechSynthesis.getVoices().filter(arg || (voice => voice))\r\n}\r\nconst getVoiceByName = (name) => {\r\n  return getVoices(voice => voice.name === name)[0]\r\n}\r\nconst indexOfLangsByLocale = (locale) => {\r\n  return langs.reduce((ax, lang, i) => {\r\n    const exists = lang.skip(1).reduce((xs, x) => {\r\n      xs.push(x[0]);\r\n      return xs;\r\n    }, []).includes(locale)\r\n\r\n    \r\n    if(exists) {\r\n      ax = i\r\n      console.log(`exists ${i}`)\r\n    }\r\n    return ax\r\n  }, null)\r\n}\r\nconst isAndroid = () => /(android)/i.test(navigator.userAgent)\r\n\r\nfunction App() {\r\n  const speechLog = useRef('');\r\n  const speech = useRef();\r\n  const [selectedIndex, setSelectedIndex] = useState(null);\r\n  const [dialect, setDialect] = useState();\r\n  const [finalTranscript, setFinalTranscript] = useState('');\r\n  const [interimTranscript, setInterimTranscript] = useState('');\r\n  const [isPowerOn, setIsPowerOn] = useState(false);\r\n  const [voices, setVoices] = useState([]);\r\n  const [selectedVoice, setSelectedVoice] = useState(null);\r\n  const [sentence, setSentence] = useState(\"I'm going to make him an offer he can't refuse.\");\r\n  const [rate, setRate] = useState(1);\r\n  const [volume, setVolume] = useState(1);\r\n  const [histories, setHistories] = useState([]);\r\n  const [currentTab, setCurrentTab] = React.useState(0);\r\n\r\n  const setDefautVoice = () => {\r\n    // 日本語と英語以外の声は選択肢に追加しない。\r\n    const voices = getVoices(voice => voice.lang.match('ja|en[-_]US')).reverse()\r\n    const defautVoice = voices.filter(voice => voice.lang.match('en[-_]US') /*&& /^google/i.test(voice.name)*/)[0]\r\n    defautVoice && setSelectedVoice(defautVoice)\r\n    setVoices(voices)\r\n  }\r\n  const initialize = _ => {\r\n    console.log('初期化処理')\r\n    speech.current = new SpeechDaemon()\r\n    speech.current.on('result', (event) => {\r\n      let transcript = ''\r\n      let buf = ''\r\n      for (let i = event.resultIndex; i < event.results.length; i++) {\r\n        transcript = event.results[i][0].transcript;\r\n        if (event.results[i].isFinal && (!isAndroid() || event.results[i][0].confidence > 0)) {\r\n          if (speech.current.lang === 'ja-JP') {\r\n            transcript += '。';\r\n          }\r\n          speechLog.current += transcript + '\\n'\r\n          console.log(speechLog.current)\r\n          setFinalTranscript(speechLog.current)\r\n        } else {\r\n          buf += transcript\r\n        }\r\n        setInterimTranscript(buf)\r\n      }\r\n    })\r\n    .on('start', () => {\r\n      console.log(\"話しかけてみて\")\r\n    }).on('soundstart', () => {\r\n      console.log(\"認識中...\")\r\n    }).on('soundend', () => {\r\n      console.log(\"停止中\")\r\n    }).on('nomatch', (event) => {\r\n      console.log('音声を認識できませんでした')\r\n    }).on('error', (event) => {\r\n      console.log('エラー: ' + event.error)\r\n    })\r\n\r\n    window.speechSynthesis.onvoiceschanged = _ => {\r\n      console.log('onvoiceschanged')\r\n      setDefautVoice()\r\n    }\r\n    setDefautVoice()\r\n\r\n    const histories = JSON.parse(localStorage.getItem(\"histories\"))\r\n    if(!histories) return\r\n    setHistories(histories)\r\n  }\r\n  \r\n  useEffect(initialize, [])\r\n\r\n  useEffect(_ => {\r\n    console.log('changed selectedVoice')\r\n    if(!selectedVoice) return\r\n\r\n    const i = indexOfLangsByLocale(selectedVoice.lang.replace('_', '-'))\r\n    setSelectedIndex(i)\r\n\r\n    setDialect(langs[i].filter((a, j) => j > 0).reduce((xs, x) => {\r\n      if(x[0] === selectedVoice.lang.replace('_', '-')) xs = x\r\n      return xs\r\n    })[0])\r\n  }, [selectedVoice])\r\n\r\n  if(!selectedVoice || !selectedIndex) {\r\n    console.log('音声取得中')\r\n    return (<>音声取得中</>)\r\n  }\r\n\r\n  const hasDialect = langs[selectedIndex][1].length > 1\r\n\r\n  if(isPowerOn) {\r\n    console.log('Microphone On')\r\n    speech.current.lang = dialect\r\n    speech.current.listen()\r\n  } else {\r\n    console.log('onMicrophone Off')\r\n    speech.current.kill()\r\n  }\r\n\r\n  const latelyTranscript = (n) => {\r\n    return finalTranscript.split('\\n')\r\n      .filter(x => x.length > 0)\r\n      .slice(-1 * n)\r\n      .map((x, i) => <p key={i}>{x}</p>)\r\n  }\r\n\r\n  const handleChangedSentence = e => setSentence(e.target.value)\r\n\r\n  const judgment = (_ => {\r\n    const phrases = speechLog.current.split('\\n').filter(x => x.length > 0)\r\n    if(phrases.length > 0) {\r\n      const pattern = new RegExp(/[\\s!',\\.、。]/, 'g')\r\n      const [actual, expected] = [phrases.pop(), sentence].map(x => x.replace(pattern, '').toLowerCase())\r\n      return (actual === expected) ? <CorrectSign /> : <IncorrectSign />\r\n    } else {\r\n      return (<></>)\r\n    }\r\n  })()\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <Typography>ドラマ・映画の名言をシャドーイング</Typography>\r\n\r\n      <Tabs\r\n        value={currentTab}\r\n        onChange={(event, newValue) => {\r\n          setCurrentTab(newValue);\r\n        }}\r\n        indicatorColor=\"primary\"\r\n        textColor=\"primary\"\r\n        centered\r\n      >\r\n        <Tab label=\"ホーム\" />\r\n        <Tab label=\"過去の台詞\" />\r\n      </Tabs>\r\n      {currentTab === 0 && (<>\r\n\r\n      {judgment}\r\n\r\n      <div className=\"recognition\">\r\n        <div id=\"results\">\r\n          <span className=\"final\" id=\"final_span\">{latelyTranscript(5)}</span>\r\n          <InterimTranscript>{interimTranscript}</InterimTranscript>\r\n        </div>\r\n        <div className=\"tools\">\r\n          <Grid container direction=\"column\" justify=\"space-around\" alignItems=\"center\">\r\n            <Grid item>\r\n              <div style={{display: 'none'}}>\r\n                <select disabled={true} value={selectedIndex}>\r\n                {\r\n                  langs.map((x, i) => <option key={x[0]} value={i}>{x[0]}</option>)\r\n                }\r\n                </select>&nbsp;&nbsp; \r\n                <select disabled={true} value={dialect} style={{visibility: hasDialect ? 'visible' : 'hidden'}}>\r\n                {\r\n                  langs[selectedIndex]\r\n                    .filter((x, i) => i > 0)\r\n                    .map((x ,i) => <option key={i} value={x[0]}>{x[1]||''}</option>)\r\n                }\r\n                </select>\r\n              </div>\r\n            </Grid>\r\n          \r\n            <Grid item>\r\n              <ButtonToConvertToTextFileThenDownload text={finalTranscript}>\r\n                ログをダウンロード\r\n              </ButtonToConvertToTextFileThenDownload>\r\n            </Grid>\r\n            <Grid item>\r\n              <div style={{padding: \"10px\"}}>\r\n              <MicrophoneSwitch isPowerOn={isPowerOn}\r\n                              onClick={() => {setIsPowerOn(!isPowerOn)}} />\r\n              </div>\r\n            </Grid>          \r\n          </Grid>\r\n        </div>\r\n      </div>\r\n      <br/>\r\n      <NativeSpeaker sentence={sentence}\r\n        selectedVoice={selectedVoice}\r\n        voices={voices}\r\n        onChangedSentence={handleChangedSentence}\r\n        onChangeVoice={e => {\r\n          const voice = getVoiceByName(e.target.value)\r\n          setSelectedVoice(voice)\r\n          speech.current.lang = voice.lang\r\n          speech.current.restart()\r\n        }}\r\n        onSpeak={_ => {\r\n          let sentences = [sentence, ...histories.filter(x => x !== sentence)]\r\n          setHistories(sentences)\r\n          window.localStorage.setItem('histories', JSON.stringify(sentences))\r\n        }}\r\n        rate={rate} onChangedRate={(e, newValue) => setRate(newValue)}\r\n        volume={volume} onChangedVolume={(e, newValue) => setVolume(newValue)} />\r\n      </>)}\r\n\r\n      {currentTab === 1 && (\r\n        <StackHistory histories={histories}\r\n          onChange={handleChangedSentence} />)}\r\n\r\n      <h2>よくある質問</h2>\r\n      <h3>使用方法を教えて？</h3>\r\n      <ol className=\"text-left\">\r\n        <li>ドラマ・映画の名言を入力しましょう。</li>\r\n        <li>スピーカーアイコンをタップして、発音を聞きます。</li>\r\n        <li>マイクアイコンをタップして、マイクONにします。</li>\r\n        <li>役者になったつもりで、聞こえたとおりに喋ってみましょう。</li>\r\n      </ol>\r\n\r\n      <h3>動作しないけど...</h3>\r\n      Chromeブラウザで動作します。\r\n      <table className=\"qa\">\r\n        <thead>\r\n          <tr>\r\n            <th colSpan=\"2\">対応デバイス</th>\r\n            <th>可否</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td><WindowsSign/></td>\r\n            <td className=\"text-left\">PC</td>\r\n            <td><CorrectSign/></td>\r\n          </tr>\r\n          <tr>\r\n            <td><AndroidSign/></td>\r\n            <td className=\"text-left\">Android</td>\r\n            <td><CorrectSign/></td>\r\n          </tr>\r\n          <tr>\r\n            <td><AppleSign/></td>\r\n            <td className=\"text-left\">iPhone</td>\r\n            <td><IncorrectSign/></td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n      <hr/>\r\n\r\n      <div className=\"footer\">\r\n        <a target=\"_blank\" href=\"https://github.com/GangDuo/shadowing\"><GithubSign />GitHub</a>\r\n      </div>\r\n\r\n      <style jsx>{styles}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}